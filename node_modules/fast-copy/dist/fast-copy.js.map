{"version":3,"file":"fast-copy.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["const { toString: toStringFunction } = Function.prototype;\nconst {\n  create,\n  defineProperty,\n  getOwnPropertyDescriptor,\n  getOwnPropertyNames,\n  getOwnPropertySymbols,\n  getPrototypeOf,\n} = Object;\nconst { hasOwnProperty, propertyIsEnumerable } = Object.prototype;\n\n/**\n * @enum\n *\n * @const {Object} SUPPORTS\n *\n * @property {boolean} SYMBOL_PROPERTIES are symbol properties supported\n * @property {boolean} WEAKMAP is WeakMap supported\n */\nexport const SUPPORTS = {\n  SYMBOL_PROPERTIES: typeof getOwnPropertySymbols === 'function',\n  WEAKMAP: typeof WeakMap === 'function',\n};\n\n/**\n * @function createCache\n *\n * @description\n * get a new cache object to prevent circular references\n *\n * @returns the new cache object\n */\nexport const createCache = (): FastCopy.Cache => {\n  if (SUPPORTS.WEAKMAP) {\n    return new WeakMap();\n  }\n\n  // tiny implementation of WeakMap\n  const object = create({\n    has: (key: any) => !!~object._keys.indexOf(key),\n    set: (key: any, value: any) => {\n      object._keys.push(key);\n      object._values.push(value);\n    },\n    get: (key: any) => object._values[object._keys.indexOf(key)],\n  });\n\n  object._keys = [];\n  object._values = [];\n\n  return object;\n};\n\n/**\n * @function getCleanClone\n *\n * @description\n * get an empty version of the object with the same prototype it has\n *\n * @param object the object to build a clean clone from\n * @param realm the realm the object resides in\n * @returns the empty cloned object\n */\nexport const getCleanClone = (object: any, realm: FastCopy.Realm): any => {\n  if (!object.constructor) {\n    return create(null);\n  }\n\n  const { constructor: Constructor } = object;\n  const prototype = object.__proto__ || getPrototypeOf(object);\n\n  if (Constructor === realm.Object) {\n    return prototype === realm.Object.prototype ? {} : create(prototype);\n  }\n\n  if (~toStringFunction.call(Constructor).indexOf('[native code]')) {\n    try {\n      return new Constructor();\n    } catch {}\n  }\n\n  return create(prototype);\n};\n\n/**\n * @function getObjectCloneLoose\n *\n * @description\n * get a copy of the object based on loose rules, meaning all enumerable keys\n * and symbols are copied, but property descriptors are not considered\n *\n * @param object the object to clone\n * @param realm the realm the object resides in\n * @param handleCopy the function that handles copying the object\n * @returns the copied object\n */\nexport const getObjectCloneLoose: FastCopy.ObjectCloner = (\n  object: any,\n  realm: FastCopy.Realm,\n  handleCopy: FastCopy.Copier,\n  cache: FastCopy.Cache,\n): any => {\n  const clone: any = getCleanClone(object, realm);\n  // set in the cache immediately to be able to reuse the object recursively\n  cache.set(object, clone);\n\n  for (const key in object) {\n    if (hasOwnProperty.call(object, key)) {\n      clone[key] = handleCopy(object[key], cache);\n    }\n  }\n\n  if (SUPPORTS.SYMBOL_PROPERTIES) {\n    const symbols: symbol[] = getOwnPropertySymbols(object);\n\n    const { length } = symbols;\n\n    if (length) {\n      for (let index = 0, symbol; index < length; index++) {\n        symbol = symbols[index];\n\n        if (propertyIsEnumerable.call(object, symbol)) {\n          clone[symbol] = handleCopy(object[symbol], cache);\n        }\n      }\n    }\n  }\n\n  return clone;\n};\n\n/**\n * @function getObjectCloneStrict\n *\n * @description\n * get a copy of the object based on strict rules, meaning all keys and symbols\n * are copied based on the original property descriptors\n *\n * @param object the object to clone\n * @param realm the realm the object resides in\n * @param handleCopy the function that handles copying the object\n * @returns the copied object\n */\nexport const getObjectCloneStrict: FastCopy.ObjectCloner = (\n  object: any,\n  realm: FastCopy.Realm,\n  handleCopy: FastCopy.Copier,\n  cache: FastCopy.Cache,\n): any => {\n  const clone: any = getCleanClone(object, realm);\n  // set in the cache immediately to be able to reuse the object recursively\n  cache.set(object, clone);\n\n  const properties: (string | symbol)[] = SUPPORTS.SYMBOL_PROPERTIES\n    ? getOwnPropertyNames(object).concat((getOwnPropertySymbols(object) as unknown) as string[])\n    : getOwnPropertyNames(object);\n\n  const { length } = properties;\n\n  if (length) {\n    for (let index = 0, property, descriptor; index < length; index++) {\n      property = properties[index];\n\n      if (property !== 'callee' && property !== 'caller') {\n        descriptor = getOwnPropertyDescriptor(object, property);\n\n        if (descriptor) {\n          // Only clone the value if actually a value, not a getter / setter.\n          if (!descriptor.get && !descriptor.set) {\n            descriptor.value = handleCopy(object[property], cache);\n          }\n\n          try {\n            defineProperty(clone, property, descriptor);\n          } catch (error) {\n            // Tee above can fail on node in edge cases, so fall back to the loose assignment.\n            clone[property] = descriptor.value;\n          }\n        } else {\n          // In extra edge cases where the property descriptor cannot be retrived, fall back to\n          // the loose assignment.\n          clone[property] = handleCopy(object[property], cache);\n        }\n      }\n    }\n  }\n\n  return clone;\n};\n\n/**\n * @function getRegExpFlags\n *\n * @description\n * get the flags to apply to the copied regexp\n *\n * @param regExp the regexp to get the flags of\n * @returns the flags for the regexp\n */\nexport const getRegExpFlags = (regExp: RegExp): string => {\n  let flags = '';\n\n  if (regExp.global) {\n    flags += 'g';\n  }\n\n  if (regExp.ignoreCase) {\n    flags += 'i';\n  }\n\n  if (regExp.multiline) {\n    flags += 'm';\n  }\n\n  if (regExp.unicode) {\n    flags += 'u';\n  }\n\n  if (regExp.sticky) {\n    flags += 'y';\n  }\n\n  return flags;\n};\n","// utils\nimport { createCache, getObjectCloneLoose, getObjectCloneStrict, getRegExpFlags } from './utils';\n\nconst { isArray } = Array;\n\nconst GLOBAL_THIS = (() => {\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n\n  if (console && console.error) {\n    console.error('Unable to locate global object, returning \"this\".');\n  }\n})();\n\n/**\n * @function copy\n *\n * @description\n * copy an object deeply as much as possible\n *\n * If `strict` is applied, then all properties (including non-enumerable ones)\n * are copied with their original property descriptors on both objects and arrays.\n *\n * The object is compared to the global constructors in the `realm` provided,\n * and the native constructor is always used to ensure that extensions of native\n * objects (allows in ES2015+) are maintained.\n *\n * @param object the object to copy\n * @param [options] the options for copying with\n * @param [options.isStrict] should the copy be strict\n * @param [options.realm] the realm (this) object the object is copied from\n * @returns the copied object\n */\nfunction copy<T>(object: T, options?: FastCopy.Options): T {\n  // manually coalesced instead of default parameters for performance\n  const isStrict: boolean = !!(options && options.isStrict);\n  const realm: FastCopy.Realm = (options && options.realm) || GLOBAL_THIS;\n\n  const getObjectClone: FastCopy.ObjectCloner = isStrict\n    ? getObjectCloneStrict\n    : getObjectCloneLoose;\n\n  /**\n   * @function handleCopy\n   *\n   * @description\n   * copy the object recursively based on its type\n   *\n   * @param object the object to copy\n   * @returns the copied object\n   */\n  const handleCopy: FastCopy.Copier = (object: any, cache: FastCopy.Cache): any => {\n    if (!object || typeof object !== 'object') {\n      return object;\n    } if (cache.has(object)) {\n      return cache.get(object);\n    }\n\n    const { constructor: Constructor } = object;\n\n    // plain objects\n    if (Constructor === realm.Object) {\n      return getObjectClone(object, realm, handleCopy, cache);\n    }\n\n    let clone: any;\n    // arrays\n    if (isArray(object)) {\n      // if strict, include non-standard properties\n      if (isStrict) {\n        return getObjectCloneStrict(object, realm, handleCopy, cache);\n      }\n\n      const { length } = object;\n\n      clone = new Constructor();\n      cache.set(object, clone);\n\n      for (let index: number = 0; index < length; index++) {\n        clone[index] = handleCopy(object[index], cache);\n      }\n\n      return clone;\n    }\n\n    // dates\n    if (object instanceof realm.Date) {\n      return new Constructor(object.getTime());\n    }\n\n    // regexps\n    if (object instanceof realm.RegExp) {\n      clone = new Constructor(object.source, object.flags || getRegExpFlags(object));\n\n      clone.lastIndex = object.lastIndex;\n\n      return clone;\n    }\n\n    // maps\n    if (realm.Map && object instanceof realm.Map) {\n      clone = new Constructor();\n      cache.set(object, clone);\n\n      object.forEach((value: any, key: any) => {\n        clone.set(key, handleCopy(value, cache));\n      });\n\n      return clone;\n    }\n\n    // sets\n    if (realm.Set && object instanceof realm.Set) {\n      clone = new Constructor();\n      cache.set(object, clone);\n\n      object.forEach((value: any) => {\n        clone.add(handleCopy(value, cache));\n      });\n\n      return clone;\n    }\n\n    // blobs\n    if (realm.Blob && object instanceof realm.Blob) {\n      clone = new Blob([object], { type: object.type });\n      return clone;\n    }\n\n    // buffers (node-only)\n    if (realm.Buffer && realm.Buffer.isBuffer(object)) {\n      clone = realm.Buffer.allocUnsafe\n        ? realm.Buffer.allocUnsafe(object.length)\n        : new Constructor(object.length);\n\n      cache.set(object, clone);\n      object.copy(clone);\n\n      return clone;\n    }\n\n    // arraybuffers / dataviews\n    if (realm.ArrayBuffer) {\n      // dataviews\n      if (realm.ArrayBuffer.isView(object)) {\n        clone = new Constructor(object.buffer.slice(0));\n        cache.set(object, clone);\n        return clone;\n      }\n\n      // arraybuffers\n      if (object instanceof realm.ArrayBuffer) {\n        clone = object.slice(0);\n        cache.set(object, clone);\n        return clone;\n      }\n    }\n\n    // if the object cannot / should not be cloned, don't\n    if (\n      // promise-like\n      typeof object.then === 'function' ||\n      // errors\n      object instanceof Error ||\n      // weakmaps\n      (realm.WeakMap && object instanceof realm.WeakMap) ||\n      // weaksets\n      (realm.WeakSet && object instanceof realm.WeakSet)\n    ) {\n      return object;\n    }\n\n    // assume anything left is a custom constructor\n    return getObjectClone(object, realm, handleCopy, cache);\n  };\n\n  return handleCopy(object, createCache());\n}\n\n/**\n * @function strictCopy\n *\n * @description\n * copy the object with `strict` option pre-applied\n *\n * @param object the object to copy\n * @param [options] the options for copying with\n * @param [options.realm] the realm (this) object the object is copied from\n * @returns the copied object\n */\ncopy.strict = function strictCopy(object: any, options?: FastCopy.Options) {\n  return copy(object, {\n    isStrict: true,\n    realm: options ? options.realm : void 0,\n  });\n};\n\nexport default copy;\n"],"names":[],"mappings":"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"}