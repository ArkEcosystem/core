{"version":3,"file":"fast-equals.js","sources":["../src/constants.js","../src/utils.js","../src/comparator.js","../src/index.js"],"sourcesContent":["/**\n * @constant {boolean} HAS_MAP_SUPPORT\n */\nexport const HAS_MAP_SUPPORT = typeof Map === 'function';\n\n/**\n * @constant {boolean} HAS_SET_SUPPORT\n */\nexport const HAS_SET_SUPPORT = typeof Set === 'function';\n\n/**\n * @constant {boolean} HAS_WEAKSET_SUPPORT\n */\nexport const HAS_WEAKSET_SUPPORT = typeof WeakSet === 'function';\n","// constants\nimport {HAS_WEAKSET_SUPPORT} from './constants';\n\nconst keys = Object.keys;\n\n/**\n * @function addObjectToCache\n *\n * @description\n * add object to cache if it is indeed an object\n *\n * @param {any} object the object to potentially add to the cache\n * @param {Object|WeakSet} cache the cache to add to\n * @returns {void}\n */\nexport const addObjectToCache = (object, cache) => object && typeof object === 'object' && cache.add(object);\n\n/**\n *\n * @param {Array<Array<any>>} pairs the pairs to check in\n * @param {Array<any>} pairToMatch the pair to check if exists\n * @param {function} isEqual the equality comparator\n * @param {any} meta the meta item to pass through\n * @returns {boolean} does the pair exist in the pairs\n */\nexport const hasPair = (pairs, pairToMatch, isEqual, meta) => {\n  let pair;\n\n  for (let index = 0; index < pairs.length; index++) {\n    pair = pairs[index];\n\n    if (isEqual(pair[0], pairToMatch[0], meta) && isEqual(pair[1], pairToMatch[1], meta)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\n/**\n * @function hasValue\n *\n * @description\n * does the values include the vakye passed\n *\n * @param {Array<any>} values the values to check in\n * @param {any} item the value to locate\n * @param {function} isEqual the equality comparator\n * @param {any} meta the meta item to pass through\n * @returns {boolean} does the value exist in the values\n */\nexport const hasValue = (values, item, isEqual, meta) => {\n  for (let index = 0; index < values.length; index++) {\n    if (isEqual(values[index], item, meta)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\n/**\n * @function sameValueZeroEqual\n *\n * @description\n * are the objects passed strictly equal or both NaN\n *\n * @param {any} objectA the object to compare against\n * @param {any} objectB the object to test\n * @returns {boolean} are the objects equal by the SameValueZero principle\n */\nexport const sameValueZeroEqual = (objectA, objectB) =>\n  objectA === objectB || (objectA !== objectA && objectB !== objectB);\n\n/**\n * @function isPlainObject\n *\n * @description\n * is the object a plain object\n *\n * @param {any} object the object to test\n * @returns {boolean} is the object a plain object\n */\nexport const isPlainObject = (object) => object.constructor === Object;\n\n/**\n * @function isPromiseLike\n *\n * @description\n * is the object promise-like (thenable)\n *\n * @param {any} object the object to test\n * @returns {boolean} is the object promise-like\n */\nexport const isPromiseLike = (object) => typeof object.then === 'function';\n\n/**\n * @function isReactElement\n *\n * @description\n * is the object passed a react element\n *\n * @param {any} object the object to test\n * @returns {boolean} is the object a react element\n */\nexport const isReactElement = (object) => !!(object.$$typeof && object._store);\n\n/**\n * @function getNewCache\n *\n * @description\n * get a new cache object to prevent circular references\n *\n * @returns {Object|Weakset} the new cache object\n */\nexport const getNewCache = () =>\n  HAS_WEAKSET_SUPPORT\n    ? new WeakSet()\n    : Object.create({\n      _values: [],\n      add(value) {\n        this._values.push(value);\n      },\n      has(value) {\n        return !!~this._values.indexOf(value);\n      },\n    });\n\n/**\n * @function createCircularEqual\n *\n * @description\n * create a custom isEqual handler specific to circular objects\n *\n * @param {funtion} [isEqual] the isEqual comparator to use instead of isDeepEqual\n * @returns {function(any, any): boolean}\n */\nexport const createCircularEqual = (isEqual) => (isDeepEqual) => {\n  const comparator = isEqual || isDeepEqual;\n\n  return (objectA, objectB, cache = getNewCache()) => {\n    const cacheHasA = cache.has(objectA);\n    const cacheHasB = cache.has(objectB);\n\n    if (cacheHasA || cacheHasB) {\n      return cacheHasA && cacheHasB;\n    }\n\n    addObjectToCache(objectA, cache);\n    addObjectToCache(objectB, cache);\n\n    return comparator(objectA, objectB, cache);\n  };\n};\n\n/**\n * @function toPairs\n *\n * @param {Map} map the map to convert to [key, value] pairs (entries)\n * @returns {Array<Array<*>>} the [key, value] pairs\n */\nexport const toPairs = (map) => {\n  const pairs = [];\n\n  map.forEach((value, key) => pairs.push([key, value]));\n\n  return pairs;\n};\n\n/**\n * @function toValues\n *\n * @param {Set} set the set to convert to values\n * @returns {Array<*>} the values\n */\nexport const toValues = (set) => {\n  const values = [];\n\n  set.forEach((value) => values.push(value));\n\n  return values;\n};\n\n/**\n * @function areArraysEqual\n *\n * @description\n * are the arrays equal in value\n *\n * @param {Array<any>} arrayA the array to test\n * @param {Array<any>} arrayB the array to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta object to pass through\n * @returns {boolean} are the arrays equal\n */\nexport const areArraysEqual = (arrayA, arrayB, isEqual, meta) => {\n  if (arrayA.length !== arrayB.length) {\n    return false;\n  }\n\n  for (let index = 0; index < arrayA.length; index++) {\n    if (!isEqual(arrayA[index], arrayB[index], meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @function areMapsEqual\n *\n * @description\n * are the maps equal in value\n *\n * @param {Map} mapA the map to test\n * @param {Map} mapB the map to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta map to pass through\n * @returns {boolean} are the maps equal\n */\nexport const areMapsEqual = (mapA, mapB, isEqual, meta) => {\n  if (mapA.size !== mapB.size) {\n    return false;\n  }\n\n  const pairsA = toPairs(mapA);\n  const pairsB = toPairs(mapB);\n\n  for (let index = 0; index < pairsA.length; index++) {\n    if (!hasPair(pairsB, pairsA[index], isEqual, meta) || !hasPair(pairsA, pairsB[index], isEqual, meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @function areObjectsEqual\n *\n * @description\n * are the objects equal in value\n *\n * @param {Object} objectA the object to test\n * @param {Object} objectB the object to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta object to pass through\n * @returns {boolean} are the objects equal\n */\nexport const areObjectsEqual = (objectA, objectB, isEqual, meta) => {\n  const keysA = keys(objectA);\n  const keysB = keys(objectB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  let key;\n\n  for (let index = 0; index < keysA.length; index++) {\n    key = keysA[index];\n\n    if (!hasValue(keysB, key, sameValueZeroEqual)) {\n      return false;\n    }\n\n    // if a react element, ignore the \"_owner\" key because its not necessary for equality comparisons\n    if (key === '_owner' && isReactElement(objectA) && isReactElement(objectB)) {\n      continue;\n    }\n\n    if (!isEqual(objectA[key], objectB[key], meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @function areRegExpsEqual\n *\n * @description\n * are the regExps equal in value\n *\n * @param {RegExp} regExpA the regExp to test\n * @param {RegExp} regExpB the regExp to test agains\n * @returns {boolean} are the regExps equal\n */\nexport const areRegExpsEqual = (regExpA, regExpB) =>\n  regExpA.source === regExpB.source\n  && regExpA.global === regExpB.global\n  && regExpA.ignoreCase === regExpB.ignoreCase\n  && regExpA.multiline === regExpB.multiline\n  && regExpA.unicode === regExpB.unicode\n  && regExpA.sticky === regExpB.sticky\n  && regExpA.lastIndex === regExpB.lastIndex;\n\n/**\n * @function areSetsEqual\n *\n * @description\n * are the sets equal in value\n *\n * @param {Set} setA the set to test\n * @param {Set} setB the set to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta set to pass through\n * @returns {boolean} are the sets equal\n */\nexport const areSetsEqual = (setA, setB, isEqual, meta) => {\n  if (setA.size !== setB.size) {\n    return false;\n  }\n\n  const valuesA = toValues(setA);\n  const valuesB = toValues(setB);\n\n  for (let index = 0; index < valuesA.length; index++) {\n    if (!hasValue(valuesB, valuesA[index], isEqual, meta) || !hasValue(valuesA, valuesB[index], isEqual, meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","// constants\nimport {\n  HAS_MAP_SUPPORT,\n  HAS_SET_SUPPORT,\n} from './constants';\n\n// utils\nimport {\n  areArraysEqual,\n  areMapsEqual,\n  areObjectsEqual,\n  areRegExpsEqual,\n  areSetsEqual,\n  isPlainObject,\n  isPromiseLike,\n  sameValueZeroEqual,\n} from './utils';\n\nconst isArray = Array.isArray;\n\nconst createComparator = (createIsEqual) => {\n  // eslint-disable-next-line no-use-before-define\n  const isEqual = typeof createIsEqual === 'function' ? createIsEqual(comparator) : comparator;\n\n  /**\n   * @function comparator\n   *\n   * @description\n   * compare the value of the two objects and return true if they are equivalent in values\n   *\n   * @param {any} objectA the object to test against\n   * @param {any} objectB the object to test\n   * @param {any} [meta] an optional meta object that is passed through to all equality test calls\n   * @returns {boolean} are objectA and objectB equivalent in value\n   */\n  function comparator(objectA, objectB, meta) {\n    if (sameValueZeroEqual(objectA, objectB)) {\n      return true;\n    }\n\n    const typeOfA = typeof objectA;\n\n    if (typeOfA !== typeof objectB || typeOfA !== 'object' || !objectA || !objectB) {\n      return false;\n    }\n\n    if (isPlainObject(objectA) && isPlainObject(objectB)) {\n      return areObjectsEqual(objectA, objectB, isEqual, meta);\n    }\n\n    const arrayA = isArray(objectA);\n    const arrayB = isArray(objectB);\n\n    if (arrayA || arrayB) {\n      return arrayA === arrayB && areArraysEqual(objectA, objectB, isEqual, meta);\n    }\n\n    const dateA = objectA instanceof Date;\n    const dateB = objectB instanceof Date;\n\n    if (dateA || dateB) {\n      return dateA === dateB && sameValueZeroEqual(objectA.getTime(), objectB.getTime());\n    }\n\n    const regexpA = objectA instanceof RegExp;\n    const regexpB = objectB instanceof RegExp;\n\n    if (regexpA || regexpB) {\n      return regexpA === regexpB && areRegExpsEqual(objectA, objectB);\n    }\n\n    if (isPromiseLike(objectA) || isPromiseLike(objectB)) {\n      return objectA === objectB;\n    }\n\n    if (HAS_MAP_SUPPORT) {\n      const mapA = objectA instanceof Map;\n      const mapB = objectB instanceof Map;\n\n      if (mapA || mapB) {\n        return mapA === mapB && areMapsEqual(objectA, objectB, isEqual, meta);\n      }\n    }\n\n    if (HAS_SET_SUPPORT) {\n      const setA = objectA instanceof Set;\n      const setB = objectB instanceof Set;\n\n      if (setA || setB) {\n        return setA === setB && areSetsEqual(objectA, objectB, isEqual, meta);\n      }\n    }\n\n    return areObjectsEqual(objectA, objectB, isEqual, meta);\n  }\n\n  return comparator;\n};\n\nexport default createComparator;\n","// comparator\nimport createCustomEqual from './comparator';\n\n// utils\nimport {\n  createCircularEqual,\n  sameValueZeroEqual,\n} from './utils';\n\nexport {\n  createCustomEqual, sameValueZeroEqual,\n};\n\nexport const circularDeepEqual = createCustomEqual(createCircularEqual());\nexport const circularShallowEqual = createCustomEqual(createCircularEqual(sameValueZeroEqual));\nexport const deepEqual = createCustomEqual();\nexport const shallowEqual = createCustomEqual(() => sameValueZeroEqual);\n\nexport default {\n  circularDeep: circularDeepEqual,\n  circularShallow: circularShallowEqual,\n  createCustom: createCustomEqual,\n  deep: deepEqual,\n  sameValueZero: sameValueZeroEqual,\n  shallow: shallowEqual,\n};\n"],"names":["HAS_MAP_SUPPORT","Map","HAS_SET_SUPPORT","Set","HAS_WEAKSET_SUPPORT","WeakSet","keys","Object","addObjectToCache","object","cache","add","hasPair","pairs","pairToMatch","isEqual","meta","pair","index","length","hasValue","values","item","sameValueZeroEqual","objectA","objectB","isPlainObject","constructor","isPromiseLike","then","isReactElement","$$typeof","_store","getNewCache","create","_values","value","push","has","indexOf","createCircularEqual","isDeepEqual","comparator","cacheHasA","cacheHasB","toPairs","map","forEach","key","toValues","set","areArraysEqual","arrayA","arrayB","areMapsEqual","mapA","mapB","size","pairsA","pairsB","areObjectsEqual","keysA","keysB","areRegExpsEqual","regExpA","regExpB","source","global","ignoreCase","multiline","unicode","sticky","lastIndex","areSetsEqual","setA","setB","valuesA","valuesB","isArray","Array","createComparator","createIsEqual","typeOfA","dateA","Date","dateB","getTime","regexpA","RegExp","regexpB","circularDeepEqual","createCustomEqual","circularShallowEqual","deepEqual","shallowEqual","circularDeep","circularShallow","createCustom","deep","sameValueZero","shallow"],"mappings":"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"}