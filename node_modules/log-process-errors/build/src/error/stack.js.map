{"version":3,"sources":["../../../src/error/stack.js"],"names":["getStack","event","nextValue","value","stack","getEventStack","stackA","removeStackHeader","Error","replace","FIRST_LINE_REGEXP"],"mappings":";AACO,KAAMA,CAAAA,QAAQ,CAAG,SAAS,CAAEC,KAAK,CAAE,CAAEC,SAAF,CAAaC,KAAb,CAAT,CAAT,CAA0C;AAChE,KAAMC,CAAAA,KAAK,CAAGC,aAAa,CAAC,CAAEH,SAAF,CAAaC,KAAb,CAAD,CAA3B;AACA,KAAMG,CAAAA,MAAM,CAAGC,iBAAiB,CAAC,CAAEH,KAAF,CAAD,CAAhC;AACA,MAAOE,CAAAA,MAAP;AACD,CAJM,C;;;AAOP,KAAMD,CAAAA,aAAa,CAAG,SAAS,CAAEH,SAAF,CAAaC,KAAb,CAAT,CAA+B;AACnD,GAAID,SAAS,WAAYM,CAAAA,KAAzB,CAAgC;AAC9B,MAAON,CAAAA,SAAS,CAACE,KAAjB;AACD;;AAED,GAAID,KAAK,WAAYK,CAAAA,KAArB,CAA4B;AAC1B,MAAOL,CAAAA,KAAK,CAACC,KAAb;AACD;;AAED,MAAO,EAAP;AACD,CAVD;;;;AAcA,KAAMG,CAAAA,iBAAiB,CAAG,SAAS,CAAEH,KAAF,CAAT,CAAoB;AAC5C,MAAOA,CAAAA,KAAK,CAACK,OAAN,CAAcC,iBAAd,CAAiC,EAAjC,CAAP;AACD,CAFD;;AAIA,KAAMA,CAAAA,iBAAiB,CAAG,+CAA1B","sourcesContent":["// Retrieve `error.stack` by re-using the original error's stack trace\nexport const getStack = function({ event: { nextValue, value } }) {\n  const stack = getEventStack({ nextValue, value })\n  const stackA = removeStackHeader({ stack })\n  return stackA\n}\n\n// Find the original error's stack trace\nconst getEventStack = function({ nextValue, value }) {\n  if (nextValue instanceof Error) {\n    return nextValue.stack\n  }\n\n  if (value instanceof Error) {\n    return value.stack\n  }\n\n  return ''\n}\n\n// Remove first line of `Error.stack` as it contains `Error.name|message`,\n// which is already present in the upper error's `message`\nconst removeStackHeader = function({ stack }) {\n  return stack.replace(FIRST_LINE_REGEXP, '')\n}\n\nconst FIRST_LINE_REGEXP = /.*\\n/u\n"],"file":"src/error/stack.js"}