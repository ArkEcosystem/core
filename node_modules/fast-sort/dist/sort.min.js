!function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(r=r||self)["fast-sort"]=n()}(this,function(){"use strict";function i(e){return function(r,n,t){return e(r,n,t)*t}}var c=function(r,n){if(r)throw Error("Invalid sort config: "+n)},y=function(r){var n=r||{},t=n.asc,e=n.desc,o=t?1:-1,u=t||e;return c(!u,"Expected `asc` or `desc` property"),c(t&&e,"Ambiguous object with `asc` and `desc` config properties"),{order:o,sortBy:u,comparer:r.comparer&&i(r.comparer)}},f=function(d){return function r(n,t,e,o,u,i,c){var f,a;if("string"==typeof n)f=i[n],a=c[n];else{if("function"!=typeof n){var s=y(n);return r(s.sortBy,t,e,s.order,s.comparer||d,i,c)}f=n(i),a=n(c)}var p=u(f,a,o);return(0===p||null==f&&null==a)&&t.length>e?r(t[e],t,e+1,o,u,i,c):p}};function e(r,n,t,e){return Array.isArray(n)?(Array.isArray(t)&&t.length<2&&(t=t[0]),n.sort(function r(t,e,o){if(void 0===t||!0===t)return function(r,n){return e(r,n,o)};if("string"==typeof t)return c(t.includes("."),"String syntax not allowed for nested properties."),function(r,n){return e(r[t],n[t],o)};if("function"==typeof t)return function(r,n){return e(t(r),t(n),o)};if(Array.isArray(t)){var u=f(e);return function(r,n){return u(t[0],t,1,o,e,r,n)}}var n=y(t);return r(n.sortBy,n.comparer||e,n.order)}(t,e,r))):n}function r(r){var t=i(r.comparer);return function(n){return{asc:function(r){return e(1,n,r,t)},desc:function(r){return e(-1,n,r,t)},by:function(r){return e(1,n,r,t)}}}}var n=r({comparer:function(r,n,t){return null==r?t:null==n?-t:r<n?-1:r===n?0:1}});return n.createNewInstance=r,n});
