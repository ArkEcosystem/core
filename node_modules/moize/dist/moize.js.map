{"version":3,"file":"moize.js","sources":["../node_modules/micro-memoize/es/utils.js","../node_modules/micro-memoize/es/index.js","../src/constants.js","../src/utils.js","../src/maxAge.js","../src/stats.js","../src/instance.js","../node_modules/fast-equals/dist/fast-equals.esm.js","../src/maxArgs.js","../node_modules/fast-stringify/es/utils.js","../node_modules/fast-stringify/es/index.js","../src/serialize.js","../src/options.js","../src/index.js"],"sourcesContent":["// types\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * @function assign\n *\n * @description\n * merge the sources into the target, as you would with Object.assign()\n *\n * @param {Object} target object to merge into\n * @param  {...Array<Object>} sources the sources to merge into the target\n * @returns {Object} the merged object\n */\n\nexport var assign = function assign(target) {\n  var source;\n\n  for (var index = 0; index < (arguments.length <= 1 ? 0 : arguments.length - 1); index++) {\n    source = index + 1 < 1 || arguments.length <= index + 1 ? undefined : arguments[index + 1];\n\n    if (source && typeof source === 'object') {\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n  }\n\n  return target;\n};\n/**\n * @function cloneArray\n *\n * @description\n * clone the array-like object and return the new array\n *\n * @param {Array<any>|Arguments} arrayLike the array-like object to clone\n * @returns {Array<any>} the clone of the array\n */\n\nexport var cloneArray = function cloneArray(arrayLike) {\n  var length = arrayLike.length;\n\n  if (!length) {\n    return [];\n  }\n\n  if (length === 1) {\n    return [arrayLike[0]];\n  }\n\n  if (length === 2) {\n    return [arrayLike[0], arrayLike[1]];\n  }\n\n  if (length === 3) {\n    return [arrayLike[0], arrayLike[1], arrayLike[2]];\n  }\n\n  var array = new Array(length);\n\n  for (var index = 0; index < length; index++) {\n    array[index] = arrayLike[index];\n  }\n\n  return array;\n};\nexport var createAreKeysEqual = function createAreKeysEqual(isEqual\n/**\n * @function areKeysEqual\n *\n * @description\n * are the keys shallowly equal to one another\n *\n * @param {Array<any>} keys1 the keys array to test against\n * @param {Array<any>} keys2 the keys array to test\n * @returns {boolean} are the keys shallowly equal\n */\n) {\n  return function (keys1, keys2) {\n    if (keys1.length !== keys2.length) {\n      return false;\n    }\n\n    for (var index = 0, length = keys1.length; index < length; index++) {\n      if (!isEqual(keys1[index], keys2[index])) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n};\nexport var createGetKeyIndex = function createGetKeyIndex(isEqual, isMatchingKey) {\n  var areKeysEqual = typeof isMatchingKey === 'function' ? isMatchingKey : createAreKeysEqual(isEqual);\n  /**\n   * @function getKeyIndex\n   *\n   * @description\n   * get the index of the matching key\n   *\n   * @param {Array<Array<any>>} allKeys the list of all available keys\n   * @param {Array<any>} keysToMatch the key to try to match\n   *\n   * @returns {number} the index of the matching key value, or -1\n   */\n\n  return function (allKeys, keysToMatch) {\n    for (var index = 0; index < allKeys.length; index++) {\n      if (areKeysEqual(allKeys[index], keysToMatch)) {\n        return index;\n      }\n    }\n\n    return -1;\n  };\n};\n/**\n * @function isSameValueZero\n *\n * @description\n * are the objects equal based on SameValueZero\n *\n * @param {any} object1 the first object to compare\n * @param {any} object2 the second object to compare\n * @returns {boolean} are the two objects equal\n */\n\nexport var isSameValueZero = function isSameValueZero(object1, object2) {\n  return object1 === object2 || object1 !== object1 && object2 !== object2;\n};\nexport var onCacheOperation = function onCacheOperation(cacheIgnored, optionsIgnored, memoizedIgnored) {};\n/**\n * @function orderByLru\n *\n * @description\n * order the array based on a Least-Recently-Used basis\n *\n * @param {Array<any>} array the array to order\n * @param {any} value the value to assign at the beginning of the array\n * @param {number} startingIndex the index of the item to move to the front\n */\n\nexport var orderByLru = function orderByLru(array, value, startingIndex) {\n  var index = startingIndex;\n\n  while (index--) {\n    array[index + 1] = array[index];\n  }\n\n  array[0] = value;\n};\n/**\n * @function createSetPromiseHandler\n *\n * @description\n * update the promise method to auto-remove from cache if rejected, and if resolved then fire cache hit / changed\n *\n * @param {Options} options the options for the memoized function\n * @param {function(Cache, function): function} memoized the memoized function\n */\n\nexport var createSetPromiseHandler = function createSetPromiseHandler(options) {\n  var getKeyIndex = createGetKeyIndex(options.isEqual, options.isMatchingKey);\n  return function (cache, memoized) {\n    var key = cache.keys[0];\n    cache.values[0] = cache.values[0].then(function (value) {\n      options.onCacheHit(cache, options, memoized);\n      options.onCacheChange(cache, options, memoized);\n      return value;\n    }).catch(function (error) {\n      var keyIndex = getKeyIndex(cache.keys, key);\n\n      if (~keyIndex) {\n        cache.keys.splice(keyIndex, 1);\n        cache.values.splice(keyIndex, 1);\n      }\n\n      throw error;\n    });\n  };\n};","function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n// types\n// utils\nimport { assign, cloneArray, createGetKeyIndex, createSetPromiseHandler, isSameValueZero, onCacheOperation, orderByLru } from './utils';\n/**\n * @function memoize\n *\n * @description\n * get the memoized version of the method passed\n *\n * @param {function} fn the method to memoize\n * @param {Object} [options={}] the options to build the memoizer with\n * @param {boolean} [options.isEqual=isSameValueZero] the method to compare equality of keys with\n * @param {number} [options.maxSize=1] the number of items to store in cache\n * @returns {function} the memoized method\n */\n\nexport default function memoize(fn, options) {\n  // if it is a memoized method, don't re-memoize it\n  if (fn.isMemoized) {\n    return fn;\n  }\n\n  var _ref = options || {},\n      _ref$isEqual = _ref.isEqual,\n      isEqual = _ref$isEqual === void 0 ? isSameValueZero : _ref$isEqual,\n      isMatchingKey = _ref.isMatchingKey,\n      _ref$isPromise = _ref.isPromise,\n      isPromise = _ref$isPromise === void 0 ? false : _ref$isPromise,\n      _ref$maxSize = _ref.maxSize,\n      maxSize = _ref$maxSize === void 0 ? 1 : _ref$maxSize,\n      _ref$onCacheAdd = _ref.onCacheAdd,\n      onCacheAdd = _ref$onCacheAdd === void 0 ? onCacheOperation : _ref$onCacheAdd,\n      _ref$onCacheChange = _ref.onCacheChange,\n      onCacheChange = _ref$onCacheChange === void 0 ? onCacheOperation : _ref$onCacheChange,\n      _ref$onCacheHit = _ref.onCacheHit,\n      onCacheHit = _ref$onCacheHit === void 0 ? onCacheOperation : _ref$onCacheHit,\n      transformKey = _ref.transformKey,\n      extraOptions = _objectWithoutPropertiesLoose(_ref, [\"isEqual\", \"isMatchingKey\", \"isPromise\", \"maxSize\", \"onCacheAdd\", \"onCacheChange\", \"onCacheHit\", \"transformKey\"]);\n\n  var normalizedOptions = assign({}, extraOptions, {\n    isEqual: isEqual,\n    isMatchingKey: isMatchingKey,\n    isPromise: isPromise,\n    maxSize: maxSize,\n    onCacheAdd: onCacheAdd,\n    onCacheChange: onCacheChange,\n    onCacheHit: onCacheHit,\n    transformKey: transformKey\n  });\n  var getKeyIndex = createGetKeyIndex(isEqual, isMatchingKey);\n  var setPromiseHandler = createSetPromiseHandler(normalizedOptions);\n  var shouldCloneArguments = !!(transformKey || isMatchingKey);\n  var cache = {\n    keys: [],\n\n    get size() {\n      return cache.keys.length;\n    },\n\n    values: []\n  };\n  var keys = cache.keys,\n      values = cache.values;\n  /**\n   * @function memoized\n   *\n   * @description\n   * the memoized version of the method passed\n   *\n   * @param {...Array<any>} key the arguments passed, which create a unique cache key\n   * @returns {any} the value of the method called with the arguments\n   */\n\n  function memoized() {\n    var args = arguments;\n    var normalizedArgs = shouldCloneArguments ? cloneArray(args) : args;\n    var key = transformKey ? transformKey(normalizedArgs) : normalizedArgs;\n    var keyIndex = getKeyIndex(keys, key);\n\n    if (~keyIndex) {\n      onCacheHit(cache, normalizedOptions, memoized);\n\n      if (keyIndex) {\n        orderByLru(keys, keys[keyIndex], keyIndex);\n        orderByLru(values, values[keyIndex], keyIndex);\n        onCacheChange(cache, normalizedOptions, memoized);\n      }\n    } else {\n      if (keys.length >= maxSize) {\n        keys.pop();\n        values.pop();\n      }\n\n      var newKey = shouldCloneArguments ? key : cloneArray(normalizedArgs);\n      var newValue = fn.apply(this, args);\n      orderByLru(keys, newKey, keys.length);\n      orderByLru(values, newValue, values.length);\n\n      if (isPromise) {\n        setPromiseHandler(cache, memoized);\n      }\n\n      onCacheAdd(cache, normalizedOptions, memoized);\n      onCacheChange(cache, normalizedOptions, memoized);\n    }\n\n    return values[0];\n  }\n\n  Object.defineProperties(memoized, {\n    cache: {\n      configurable: true,\n      get: function get() {\n        return cache;\n      }\n    },\n    cacheSnapshot: {\n      configurable: true,\n      get: function get() {\n        return {\n          keys: cloneArray(cache.keys),\n          size: cache.size,\n          values: cloneArray(cache.values)\n        };\n      }\n    },\n    isMemoized: {\n      configurable: true,\n      get: function get() {\n        return true;\n      }\n    },\n    options: {\n      configurable: true,\n      get: function get() {\n        return normalizedOptions;\n      }\n    }\n  });\n  return memoized;\n}","// @flow\n\n// types\nimport type {Options} from './types';\n\n/**\n * @private\n *\n * @constant {Object} DEFAULT_OPTIONS\n */\nexport const DEFAULT_OPTIONS: Options = {\n  equals: undefined,\n  isDeepEqual: false,\n  isPromise: false,\n  isReact: false,\n  isSerialized: false,\n  matchesKey: undefined,\n  maxAge: undefined,\n  maxArgs: undefined,\n  maxSize: Infinity,\n  onExpire: undefined,\n  profileName: undefined,\n  serializer: undefined,\n  shouldSerializeFunctions: false,\n  transformArgs: undefined,\n  updateExpire: false,\n};\n","// @flow\n\n// constants\nimport {DEFAULT_OPTIONS} from './constants';\n\n// types\nimport type {\n  Expiration,\n  Options,\n} from './types';\n\n/**\n * @private\n *\n * @function combine\n *\n * @description\n * method to combine functions and return a single function that fires them all\n *\n * @param {...Array<any>} functions the functions to compose\n * @returns {function(...Array<any>): any} the composed function\n */\nexport const combine = (...functions: Array<any>): ?Function => {\n  if (functions.length) {\n    return functions.reduce(\n      // $FlowIgnore return value is always a function\n      (f: Function, g: any): Function =>\n        typeof f === 'function'\n          ? typeof g === 'function'\n            ? function(): any {\n              // eslint-disable-next-line prefer-rest-params\n              g.apply(this, arguments);\n              // eslint-disable-next-line prefer-rest-params\n              f.apply(this, arguments);\n            }\n            : f\n          : typeof g === 'function'\n            ? g\n            : undefined\n    );\n  }\n};\n\n/**\n * @private\n *\n * @function compose\n *\n * @description\n * method to compose functions and return a single function\n *\n * @param {...Array<any>} functions the functions to compose\n * @returns {function(...Array<any>): any} the composed function\n */\nexport const compose = (...functions: Array<any>): ?Function => {\n  if (functions.length) {\n    return functions.reduce(\n      // $FlowIgnore return value is always a function\n      (f: Function, g: any): Function =>\n        typeof f === 'function'\n          ? typeof g === 'function'\n            ? function(): any {\n              // eslint-disable-next-line prefer-rest-params\n              return f(g.apply(this, arguments));\n            }\n            : f\n          : typeof g === 'function'\n            ? g\n            : undefined\n    );\n  }\n};\n\n/**\n * @private\n *\n * @function findExpirationIndex\n *\n * @description\n * find the index of the expiration based on the key\n *\n * @param {Array<Expiration>} expirations the list of expirations\n * @param {Array<any>} key the key to match\n * @returns {number} the index of the expiration\n */\nexport const findExpirationIndex = (expirations: Array<Expiration>, key: Array<any>): number => {\n  for (let index: number = 0; index < expirations.length; index++) {\n    if (expirations[index].key === key) {\n      return index;\n    }\n  }\n\n  return -1;\n};\n\nexport const createFindKeyIndex = (isEqual: Function, isMatchingKey: ?Function) => {\n  const areKeysEqual: Function =\n    typeof isMatchingKey === 'function'\n      ? isMatchingKey\n      : (cacheKey: Array<any>, key: Array<any>) => {\n        for (let index = 0; index < key.length; index++) {\n          if (!isEqual(cacheKey[index], key[index])) {\n            return false;\n          }\n        }\n\n        return true;\n      };\n\n  /**\n   * @private\n   *\n   * @function findKeyIndex\n   *\n   * @description\n   * find the index of the key in the list of cache keys\n   *\n   * @param {Array<Array<any>>} keys the list of keys in cache\n   * @param {Array<any>} key the key to match\n   * @returns {number} the index of the key\n   */\n  return (keys: Array<Array<any>>, key: Array<any>): number => {\n    for (let keysIndex = 0; keysIndex < keys.length; keysIndex++) {\n      if (keys[keysIndex].length === key.length) {\n        if (areKeysEqual(keys[keysIndex], key)) {\n          return keysIndex;\n        }\n      }\n    }\n\n    return -1;\n  };\n};\n\n/**\n * @private\n *\n * @function getArrayKey\n *\n * @description\n * return the transformed key as an array\n *\n * @param {any} key the transformed key\n * @returns {Array<any>} the key as an array\n */\nexport const getArrayKey = (key: any): Array<any> => (Array.isArray(key) ? key : [key]);\n\n/**\n * @private\n *\n * @function mergeOptions\n *\n * @description\n * merge two options objects, combining or composing functions as necessary\n *\n * @param {Options} originalOptions the options that already exist on the method\n * @param {Options} newOptions the new options to merge\n * @returns {Options} the merged options\n */\nexport const mergeOptions = (originalOptions: Options, newOptions: Options): Options =>\n  newOptions === DEFAULT_OPTIONS\n    ? originalOptions\n    : Object.assign({}, originalOptions, newOptions, {\n      // $FlowIgnore undefined value is ok\n      onCacheAdd: combine(originalOptions.onCacheAdd, newOptions.onCacheAdd),\n      // $FlowIgnore undefined value is ok\n      onCacheChange: combine(originalOptions.onCacheChange, newOptions.onCacheChange),\n      // $FlowIgnore undefined value is ok\n      onCacheHit: combine(originalOptions.onCacheHit, newOptions.onCacheHit),\n      // $FlowIgnore undefined value is ok\n      transformArgs: compose(\n        originalOptions.transformArgs,\n        newOptions.transformArgs\n      ),\n    });\n","// @flow\n\n// types\nimport type {\n  Cache,\n  Expiration,\n  Options,\n} from './types';\n\n// utils\nimport {\n  createFindKeyIndex,\n  findExpirationIndex,\n} from './utils';\n\n/**\n * @private\n *\n * @function clearExpiration\n *\n * @description\n * clear an active expiration and remove it from the list if applicable\n *\n * @param {Array<Expiration>} expirations the list of expirations\n * @param {any} key the key to clear\n * @param {boolean} [shouldRemove] should the expiration be removed from the list\n */\nexport const clearExpiration: Function = (expirations: Array<Expiration>, key: any, shouldRemove: boolean) => {\n  const expirationIndex = findExpirationIndex(expirations, key);\n\n  if (~expirationIndex) {\n    clearTimeout(expirations[expirationIndex].timeoutId);\n\n    if (shouldRemove) {\n      expirations.splice(expirationIndex, 1);\n    }\n  }\n};\n\nexport const createOnCacheAddSetExpiration: Function = (\n  expirations: Array<Expiration>,\n  options: Options,\n  isEqual: Function,\n  isMatchingKey: ?Function\n): ?Function => {\n  const {maxAge, onCacheChange, onExpire} = options;\n\n  const findKeyIndex: Function = createFindKeyIndex(isEqual, isMatchingKey);\n\n  /**\n   * @private\n   *\n   * @function onCacheAdd\n   *\n   * @description\n   * when an item is added to the cache, add an expiration for it\n   *\n   * @modifies {expirations}\n   *\n   * @param {Cache} cache the cache of the memoized function\n   * @param {Options} moizedOptions the options passed to the memoized function\n   * @param {function} moized the memoized function\n   * @returns {void}\n   */\n  return function onCacheAdd(cache: Cache, moizedOptions: Options, moized: Function): ?Function {\n    const key: any = cache.keys[0];\n\n    if (!~findExpirationIndex(expirations, key)) {\n      const expirationMethod = () => {\n        const keyIndex: number = findKeyIndex(cache.keys, key);\n        const value: any = cache.values[keyIndex];\n\n        if (~keyIndex) {\n          cache.keys.splice(keyIndex, 1);\n          cache.values.splice(keyIndex, 1);\n\n          if (typeof onCacheChange === 'function') {\n            onCacheChange(cache, moizedOptions, moized);\n          }\n        }\n\n        clearExpiration(expirations, key, true);\n\n        if (typeof onExpire === 'function' && onExpire(key) === false) {\n          cache.keys.unshift(key);\n          cache.values.unshift(value);\n\n          createOnCacheAddSetExpiration(expirations, options, isEqual)(cache, moizedOptions, moized);\n\n          if (typeof onCacheChange === 'function') {\n            onCacheChange(cache, moizedOptions, moized);\n          }\n        }\n      };\n\n      expirations.push({\n        expirationMethod,\n        key,\n        // $FlowIgnore maxAge is an number\n        timeoutId: setTimeout(expirationMethod, maxAge),\n      });\n    }\n  };\n};\n\nexport const createOnCacheHitResetExpiration: Function = (\n  expirations: Array<Expiration>,\n  options: Options\n): ?Function => {\n  const {maxAge} = options;\n\n  /**\n   * @private\n   *\n   * @function onCacheHit\n   *\n   * @description\n   * when a cache item is hit, reset the expiration\n   *\n   * @modifies {expirations}\n   *\n   * @param {Cache} cache the cache of the memoized function\n   * @returns {void}\n   */\n  return function onCacheHit(cache: Cache) {\n    const key: any = cache.keys[0];\n    const expirationIndex: number = findExpirationIndex(expirations, key);\n\n    if (~expirationIndex) {\n      clearExpiration(expirations, key, false);\n\n      expirations[expirationIndex].timeoutId = setTimeout(expirations[expirationIndex].expirationMethod, maxAge);\n    }\n  };\n};\n\n/**\n * @private\n *\n * @function getMaxAgeOptions\n *\n * @description\n * get the micro-memoize options specific to the maxAge option\n *\n * @param {Array<Expiration>} expirations the expirations for the memoized function\n * @param {Options} options the options passed to the moizer\n * @param {function} isEqual the function to test equality of the key on a per-argument basis\n * @param {function} isMatchingKey the function to test equality of the whole key\n * @returns {Object} the object of options based on the entries passed\n */\nexport const getMaxAgeOptions = (\n  expirations: Array<Expiration>,\n  options: Options,\n  isEqual: Function,\n  isMatchingKey: ?Function\n): Object => {\n  const {maxAge, updateExpire} = options;\n\n  const onCacheAdd =\n    typeof maxAge === 'number' && isFinite(maxAge)\n      ? createOnCacheAddSetExpiration(expirations, options, isEqual, isMatchingKey)\n      : undefined;\n\n  return {\n    onCacheAdd,\n    onCacheHit: onCacheAdd && updateExpire ? createOnCacheHitResetExpiration(expirations, options) : undefined,\n  };\n};\n","// @flow\n\n// types\nimport type {\n  Options,\n  StatsCache,\n  StatsObject,\n  StatsProfile,\n} from './types';\n\n/**\n * @private\n *\n * @constant {StatsCache} statsCache\n */\nexport const statsCache: StatsCache = {\n  anonymousProfileNameCounter: 1,\n  isCollectingStats: false,\n  profiles: {},\n};\n\n/**\n * @private\n *\n * @var {boolean} hasWarningDisplayed\n */\nlet hasWarningDisplayed: boolean = false;\n\n/**\n * @private\n *\n * @function collectStats\n *\n * @description\n * activate stats collection\n */\nexport const collectStats = (): void => {\n  statsCache.isCollectingStats = true;\n};\n\nexport const createOnCacheAddIncrementCalls = (options: Options) => {\n  const {profileName} = options;\n\n  // $FlowIgnore profileName is populated\n  if (!statsCache.profiles[profileName]) {\n    // $FlowIgnore profileName is populated\n    statsCache.profiles[profileName] = {\n      calls: 0,\n      hits: 0,\n    };\n  }\n\n  /**\n   * @private\n   *\n   * @function onCacheAddIncrementCalls\n   *\n   * @description\n   * increment the number of calls for the specific profile\n   *\n   * @modifies {statsCache}\n   */\n  return () => {\n    // $FlowIgnore profileName is populated\n    statsCache.profiles[profileName].calls++;\n  };\n};\n\nexport const createOnCacheHitIncrementCallsAndHits = (options: Options) => {\n  const {profileName} = options;\n\n  /**\n   * @private\n   *\n   * @function onCacheHitIncrementCallsAndHits\n   *\n   * @description\n   * increment the number of calls and cache hits for the specific profile\n   *\n   * @modifies {statsCache}\n   */\n  return () => {\n    // $FlowIgnore profileName is populated\n    statsCache.profiles[profileName].calls++;\n    // $FlowIgnore profileName is populated\n    statsCache.profiles[profileName].hits++;\n  };\n};\n\n/**\n * @private\n *\n * @function getDefaultProfileName\n *\n * @description\n * get the profileName for the function when one is not provided\n *\n * @param {function} fn the function to be memoized\n * @returns {string} the derived profileName for the function\n */\nexport const getDefaultProfileName = (fn: Function): string => {\n  const stack = new Error().stack;\n  const fnName = fn.displayName || fn.name || `Anonymous ${statsCache.anonymousProfileNameCounter++}`;\n\n  if (!stack) {\n    return fnName;\n  }\n\n  const lines = stack.split('\\n').slice(3);\n\n  let line, profileNameLocation;\n\n  for (let index = 0; index < lines.length; index++) {\n    line = lines[index];\n\n    if (!~line.indexOf('/moize/') && !~line.indexOf(' (native)') && !~line.indexOf(' Function.')) {\n      profileNameLocation = line.replace(/\\n/g, '\\\\n').trim();\n      break;\n    }\n  }\n\n  return profileNameLocation ? `${fnName} ${profileNameLocation}` : fnName;\n};\n\n/**\n * @private\n *\n * @function getUsagePercentage\n *\n * @description\n * get the usage percentage based on the number of hits and total calls\n *\n * @param {number} calls the number of calls made\n * @param {number} hits the number of cache hits when called\n * @returns {string} the usage as a percentage string\n */\nexport const getUsagePercentage = (calls: number, hits: number): string =>\n  calls ? `${((hits / calls) * 100).toFixed(4)}%` : '0%';\n\n/**\n * @private\n *\n * @function getStats\n *\n * @description\n * get the statistics for a given method or all methods\n *\n * @param {string} [profileName] the profileName to get the statistics for (get all when not provided)\n * @returns {StatsObject} the object with stats information\n */\nexport const getStats = (profileName: ?string): StatsObject => {\n  if (!statsCache.isCollectingStats && !hasWarningDisplayed) {\n    console.warn('Stats are not currently being collected, please run \"collectStats\" to enable them.'); // eslint-disable-line no-console\n\n    hasWarningDisplayed = true;\n  }\n\n  if (profileName) {\n    if (!statsCache.profiles[profileName]) {\n      return {\n        calls: 0,\n        hits: 0,\n        usage: '0%',\n      };\n    }\n\n    const profile: StatsProfile = statsCache.profiles[profileName];\n\n    return Object.assign({}, profile, {\n      usage: getUsagePercentage(profile.calls, profile.hits),\n    });\n  }\n\n  const completeStats: StatsProfile = Object.keys(statsCache.profiles).reduce(\n    (profiles, profileName) => {\n      profiles.calls += statsCache.profiles[profileName].calls;\n      profiles.hits += statsCache.profiles[profileName].hits;\n\n      return profiles;\n    },\n    {\n      calls: 0,\n      hits: 0,\n    }\n  );\n\n  return Object.assign({}, completeStats, {\n    profiles: Object.keys(statsCache.profiles).reduce((profiles, profileName) => {\n      profiles[profileName] = getStats(profileName);\n\n      return profiles;\n    }, {}),\n    usage: getUsagePercentage(completeStats.calls, completeStats.hits),\n  });\n};\n\n/**\n * @private\n *\n * @function getStatsOptions\n *\n * @description\n * get the options specific to storing statistics\n *\n * @param {Options} options the options passed to the moizer\n * @returns {Object} the options specific to keeping stats\n */\nexport const getStatsOptions = (options: Options): Object =>\n  statsCache.isCollectingStats\n    ? {\n      onCacheAdd: createOnCacheAddIncrementCalls(options),\n      onCacheHit: createOnCacheHitIncrementCallsAndHits(options),\n    }\n    : {};\n","// @flow\n\n// external dependencies\nimport {orderByLru} from 'micro-memoize/es/utils';\n\n// maxAge\nimport {clearExpiration} from './maxAge';\n\n// stats\nimport {\n  getStats,\n  statsCache,\n} from './stats';\n\n// types\nimport type {\n  MicroMemoizeOptions,\n  StatsProfile,\n} from './types';\n\n// utils\nimport {createFindKeyIndex} from './utils';\n\n/**\n * @private\n *\n * @function addInstanceMethods\n *\n * @description\n * add methods to the moized fuction object that allow extra features\n *\n * @modifies {moized}\n *\n * @param {function} moized the memoized function\n * @returns {void}\n */\nexport const addInstanceMethods = (moized: Function, {expirations}: Object): void => {\n  const {isEqual, isMatchingKey, onCacheAdd, onCacheChange, transformKey} = moized.options;\n\n  const findKeyIndex: Function = createFindKeyIndex(isEqual, isMatchingKey);\n\n  moized.add = (key: Array<any>, value: any): void => {\n    const savedKey: Array<any> = transformKey ? transformKey(key) : key;\n\n    if (!~findKeyIndex(moized.cache.keys, savedKey)) {\n      if (moized.cache.size >= moized.options.maxSize) {\n        moized.cache.keys.pop();\n        moized.cache.values.pop();\n      }\n\n      moized.cache.keys.unshift(savedKey);\n      moized.cache.values.unshift(value);\n\n      onCacheAdd(moized.cache, moized.options, moized);\n      onCacheChange(moized.cache, moized.options, moized);\n    }\n  };\n\n  moized.clear = (): void => {\n    moized.cache.keys.length = 0;\n    moized.cache.values.length = 0;\n\n    onCacheChange(moized.cache, moized.options, moized);\n  };\n\n  moized.get = function(key: Array<any>): any {\n    const keyIndex: number = findKeyIndex(moized.cache.keys, transformKey ? transformKey(key) : key);\n\n    return ~keyIndex ? moized.apply(this, moized.cache.keys[keyIndex]) : undefined; // eslint-disable-line prefer-spread\n  };\n\n  moized.getStats = (): StatsProfile => {\n    const {profileName} = moized.options;\n\n    return getStats(profileName);\n  };\n\n  moized.has = (key: Array<any>): boolean => !!~findKeyIndex(moized.cache.keys, transformKey ? transformKey(key) : key);\n\n  moized.keys = (): Array<Array<any>> => moized.cacheSnapshot.keys;\n\n  moized.remove = (key: Array<any>): void => {\n    const keyIndex: number = findKeyIndex(moized.cache.keys, transformKey ? transformKey(key) : key);\n\n    if (~keyIndex) {\n      const existingKey: Array<any> = moized.cache.keys[keyIndex];\n\n      moized.cache.keys.splice(keyIndex, 1);\n      moized.cache.values.splice(keyIndex, 1);\n\n      onCacheChange(moized.cache, moized.options, moized);\n\n      clearExpiration(expirations, existingKey, true);\n    }\n  };\n\n  moized.update = function(key: Array<any>, value: any): void {\n    const keyIndex = findKeyIndex(moized.cache.keys, transformKey ? transformKey(key) : key);\n\n    if (~keyIndex) {\n      const existingKey: Array<any> = moized.cache.keys[keyIndex];\n\n      orderByLru(moized.cache.keys, existingKey, keyIndex);\n      orderByLru(moized.cache.values, value, keyIndex);\n\n      onCacheChange(moized.cache, moized.options, moized);\n    }\n  };\n\n  moized.values = (): Array<Array<any>> => moized.cacheSnapshot.values;\n};\n\n/**\n * @private\n *\n * @function addInstanceMethods\n *\n * @description\n * add propeties to the moized fuction object that surfaces extra information\n *\n * @modifies {moized}\n *\n * @param {function} moized the memoized function\n * @param {Array<Expiration>} expirations the list of expirations for cache items\n * @param {Options} options the options passed to the moizer\n * @param {function} originalFunction the function that is being memoized\n * @returns {void}\n */\nexport const addInstanceProperties = (\n  moized: Function,\n  {expirations, options: moizeOptions, originalFunction}: Object\n): void => {\n  const microMemoizeOptions: MicroMemoizeOptions = moized.options;\n\n  Object.defineProperties(\n    moized,\n    ({\n      _microMemoizeOptions: {\n        configurable: true,\n        get() {\n          return microMemoizeOptions;\n        },\n      },\n      expirations: {\n        configurable: true,\n        get() {\n          return expirations;\n        },\n      },\n      expirationsSnapshot: {\n        configurable: true,\n        get() {\n          return expirations.slice(0);\n        },\n      },\n      isCollectingStats: {\n        configurable: true,\n        get() {\n          return statsCache.isCollectingStats;\n        },\n      },\n      isMoized: {\n        configurable: true,\n        get() {\n          return true;\n        },\n      },\n      options: {\n        configurable: true,\n        get() {\n          return moizeOptions;\n        },\n      },\n      originalFunction: {\n        configurable: true,\n        get() {\n          return originalFunction;\n        },\n      },\n    }: Object)\n  );\n\n  if (moizeOptions.isReact) {\n    moized.contextTypes = originalFunction.contextTypes;\n    moized.defaultProps = originalFunction.defaultProps;\n    moized.displayName = `Moized(${originalFunction.displayName || originalFunction.name || 'Component'})`;\n    moized.propTypes = originalFunction.propTypes;\n  }\n};\n\n/**\n * @private\n *\n * @function augmentMoizeInstance\n *\n * @description\n * add methods and properties to the memoized function for more features\n *\n * @param {function} moized the memoized function\n * @param {Object} configuration the configuration object for the instance\n * @returns {function} the memoized function passed\n */\nexport const augmentMoizeInstance = (moized: Function, configuration: Object): Function => {\n  addInstanceMethods(moized, configuration);\n  addInstanceProperties(moized, configuration);\n\n  return moized;\n};\n","/**\n * @constant {boolean} HAS_MAP_SUPPORT\n */\nvar HAS_MAP_SUPPORT = typeof Map === 'function';\n/**\n * @constant {boolean} HAS_SET_SUPPORT\n */\n\nvar HAS_SET_SUPPORT = typeof Set === 'function';\n/**\n * @constant {boolean} HAS_WEAKSET_SUPPORT\n */\n\nvar HAS_WEAKSET_SUPPORT = typeof WeakSet === 'function';\n\n// constants\nvar keys = Object.keys;\n/**\n * @function addObjectToCache\n *\n * @description\n * add object to cache if it is indeed an object\n *\n * @param {any} object the object to potentially add to the cache\n * @param {Object|WeakSet} cache the cache to add to\n * @returns {void}\n */\n\nvar addObjectToCache = function addObjectToCache(object, cache) {\n  return object && typeof object === 'object' && cache.add(object);\n};\n/**\n *\n * @param {Array<Array<any>>} pairs the pairs to check in\n * @param {Array<any>} pairToMatch the pair to check if exists\n * @param {function} isEqual the equality comparator\n * @param {any} meta the meta item to pass through\n * @returns {boolean} does the pair exist in the pairs\n */\n\nvar hasPair = function hasPair(pairs, pairToMatch, isEqual, meta) {\n  var pair;\n\n  for (var index = 0; index < pairs.length; index++) {\n    pair = pairs[index];\n\n    if (isEqual(pair[0], pairToMatch[0], meta) && isEqual(pair[1], pairToMatch[1], meta)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n/**\n * @function hasValue\n *\n * @description\n * does the values include the vakye passed\n *\n * @param {Array<any>} values the values to check in\n * @param {any} item the value to locate\n * @param {function} isEqual the equality comparator\n * @param {any} meta the meta item to pass through\n * @returns {boolean} does the value exist in the values\n */\n\nvar hasValue = function hasValue(values, item, isEqual, meta) {\n  for (var index = 0; index < values.length; index++) {\n    if (isEqual(values[index], item, meta)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n/**\n * @function sameValueZeroEqual\n *\n * @description\n * are the objects passed strictly equal or both NaN\n *\n * @param {any} objectA the object to compare against\n * @param {any} objectB the object to test\n * @returns {boolean} are the objects equal by the SameValueZero principle\n */\n\nvar sameValueZeroEqual = function sameValueZeroEqual(objectA, objectB) {\n  return objectA === objectB || objectA !== objectA && objectB !== objectB;\n};\n/**\n * @function isPlainObject\n *\n * @description\n * is the object a plain object\n *\n * @param {any} object the object to test\n * @returns {boolean} is the object a plain object\n */\n\nvar isPlainObject = function isPlainObject(object) {\n  return object.constructor === Object;\n};\n/**\n * @function isPromiseLike\n *\n * @description\n * is the object promise-like (thenable)\n *\n * @param {any} object the object to test\n * @returns {boolean} is the object promise-like\n */\n\nvar isPromiseLike = function isPromiseLike(object) {\n  return typeof object.then === 'function';\n};\n/**\n * @function isReactElement\n *\n * @description\n * is the object passed a react element\n *\n * @param {any} object the object to test\n * @returns {boolean} is the object a react element\n */\n\nvar isReactElement = function isReactElement(object) {\n  return !!(object.$$typeof && object._store);\n};\n/**\n * @function getNewCache\n *\n * @description\n * get a new cache object to prevent circular references\n *\n * @returns {Object|Weakset} the new cache object\n */\n\nvar getNewCache = function getNewCache() {\n  return HAS_WEAKSET_SUPPORT ? new WeakSet() : Object.create({\n    _values: [],\n    add: function add(value) {\n      this._values.push(value);\n    },\n    has: function has(value) {\n      return !!~this._values.indexOf(value);\n    }\n  });\n};\n/**\n * @function createCircularEqual\n *\n * @description\n * create a custom isEqual handler specific to circular objects\n *\n * @param {funtion} [isEqual] the isEqual comparator to use instead of isDeepEqual\n * @returns {function(any, any): boolean}\n */\n\nvar createCircularEqual = function createCircularEqual(isEqual) {\n  return function (isDeepEqual) {\n    var comparator = isEqual || isDeepEqual;\n    return function (objectA, objectB, cache) {\n      if (cache === void 0) {\n        cache = getNewCache();\n      }\n\n      var cacheHasA = cache.has(objectA);\n      var cacheHasB = cache.has(objectB);\n\n      if (cacheHasA || cacheHasB) {\n        return cacheHasA && cacheHasB;\n      }\n\n      addObjectToCache(objectA, cache);\n      addObjectToCache(objectB, cache);\n      return comparator(objectA, objectB, cache);\n    };\n  };\n};\n/**\n * @function toPairs\n *\n * @param {Map} map the map to convert to [key, value] pairs (entries)\n * @returns {Array<Array<*>>} the [key, value] pairs\n */\n\nvar toPairs = function toPairs(map) {\n  var pairs = [];\n  map.forEach(function (value, key) {\n    return pairs.push([key, value]);\n  });\n  return pairs;\n};\n/**\n * @function toValues\n *\n * @param {Set} set the set to convert to values\n * @returns {Array<*>} the values\n */\n\nvar toValues = function toValues(set) {\n  var values = [];\n  set.forEach(function (value) {\n    return values.push(value);\n  });\n  return values;\n};\n/**\n * @function areArraysEqual\n *\n * @description\n * are the arrays equal in value\n *\n * @param {Array<any>} arrayA the array to test\n * @param {Array<any>} arrayB the array to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta object to pass through\n * @returns {boolean} are the arrays equal\n */\n\nvar areArraysEqual = function areArraysEqual(arrayA, arrayB, isEqual, meta) {\n  if (arrayA.length !== arrayB.length) {\n    return false;\n  }\n\n  for (var index = 0; index < arrayA.length; index++) {\n    if (!isEqual(arrayA[index], arrayB[index], meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n/**\n * @function areMapsEqual\n *\n * @description\n * are the maps equal in value\n *\n * @param {Map} mapA the map to test\n * @param {Map} mapB the map to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta map to pass through\n * @returns {boolean} are the maps equal\n */\n\nvar areMapsEqual = function areMapsEqual(mapA, mapB, isEqual, meta) {\n  var pairsA = toPairs(mapA);\n  var pairsB = toPairs(mapB);\n\n  if (pairsA.length !== pairsB.length) {\n    return false;\n  }\n\n  for (var index = 0; index < pairsA.length; index++) {\n    if (!hasPair(pairsB, pairsA[index], isEqual, meta) || !hasPair(pairsA, pairsB[index], isEqual, meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n/**\n * @function areObjectsEqual\n *\n * @description\n * are the objects equal in value\n *\n * @param {Object} objectA the object to test\n * @param {Object} objectB the object to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta object to pass through\n * @returns {boolean} are the objects equal\n */\n\nvar areObjectsEqual = function areObjectsEqual(objectA, objectB, isEqual, meta) {\n  var keysA = keys(objectA);\n  var keysB = keys(objectB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var key;\n\n  for (var index = 0; index < keysA.length; index++) {\n    key = keysA[index];\n\n    if (!hasValue(keysB, key, sameValueZeroEqual)) {\n      return false;\n    } // if a react element, ignore the \"_owner\" key because its not necessary for equality comparisons\n\n\n    if (key === '_owner' && isReactElement(objectA) && isReactElement(objectB)) {\n      continue;\n    }\n\n    if (!isEqual(objectA[key], objectB[key], meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n/**\n * @function areRegExpsEqual\n *\n * @description\n * are the regExps equal in value\n *\n * @param {RegExp} regExpA the regExp to test\n * @param {RegExp} regExpB the regExp to test agains\n * @returns {boolean} are the regExps equal\n */\n\nvar areRegExpsEqual = function areRegExpsEqual(regExpA, regExpB) {\n  return regExpA.source === regExpB.source && regExpA.global === regExpB.global && regExpA.ignoreCase === regExpB.ignoreCase && regExpA.multiline === regExpB.multiline && regExpA.unicode === regExpB.unicode && regExpA.sticky === regExpB.sticky && regExpA.lastIndex === regExpB.lastIndex;\n};\n/**\n * @function areSetsEqual\n *\n * @description\n * are the sets equal in value\n *\n * @param {Set} setA the set to test\n * @param {Set} setB the set to test against\n * @param {function} isEqual the comparator to determine equality\n * @param {any} meta the meta set to pass through\n * @returns {boolean} are the sets equal\n */\n\nvar areSetsEqual = function areSetsEqual(setA, setB, isEqual, meta) {\n  var valuesA = toValues(setA);\n  var valuesB = toValues(setB);\n\n  if (valuesA.length !== valuesB.length) {\n    return false;\n  }\n\n  for (var index = 0; index < valuesA.length; index++) {\n    if (!hasValue(valuesB, valuesA[index], isEqual, meta) || !hasValue(valuesA, valuesB[index], isEqual, meta)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n// constants\nvar isArray = Array.isArray;\n\nvar createComparator = function createComparator(createIsEqual) {\n  // eslint-disable-next-line no-use-before-define\n  var isEqual = typeof createIsEqual === 'function' ? createIsEqual(comparator) : comparator;\n  /**\n   * @function comparator\n   *\n   * @description\n   * compare the value of the two objects and return true if they are equivalent in values\n   *\n   * @param {any} objectA the object to test against\n   * @param {any} objectB the object to test\n   * @param {any} [meta] an optional meta object that is passed through to all equality test calls\n   * @returns {boolean} are objectA and objectB equivalent in value\n   */\n\n  function comparator(objectA, objectB, meta) {\n    if (sameValueZeroEqual(objectA, objectB)) {\n      return true;\n    }\n\n    var typeOfA = typeof objectA;\n\n    if (typeOfA !== typeof objectB || typeOfA !== 'object' || !objectA || !objectB) {\n      return false;\n    }\n\n    if (isPlainObject(objectA) && isPlainObject(objectB)) {\n      return areObjectsEqual(objectA, objectB, isEqual, meta);\n    }\n\n    var arrayA = isArray(objectA);\n    var arrayB = isArray(objectB);\n\n    if (arrayA || arrayB) {\n      return arrayA === arrayB && areArraysEqual(objectA, objectB, isEqual, meta);\n    }\n\n    var dateA = objectA instanceof Date;\n    var dateB = objectB instanceof Date;\n\n    if (dateA || dateB) {\n      return dateA === dateB && sameValueZeroEqual(objectA.getTime(), objectB.getTime());\n    }\n\n    var regexpA = objectA instanceof RegExp;\n    var regexpB = objectB instanceof RegExp;\n\n    if (regexpA || regexpB) {\n      return regexpA === regexpB && areRegExpsEqual(objectA, objectB);\n    }\n\n    if (isPromiseLike(objectA) || isPromiseLike(objectB)) {\n      return objectA === objectB;\n    }\n\n    if (HAS_MAP_SUPPORT) {\n      var mapA = objectA instanceof Map;\n      var mapB = objectB instanceof Map;\n\n      if (mapA || mapB) {\n        return mapA === mapB && areMapsEqual(objectA, objectB, isEqual, meta);\n      }\n    }\n\n    if (HAS_SET_SUPPORT) {\n      var setA = objectA instanceof Set;\n      var setB = objectB instanceof Set;\n\n      if (setA || setB) {\n        return setA === setB && areSetsEqual(objectA, objectB, isEqual, meta);\n      }\n    }\n\n    return areObjectsEqual(objectA, objectB, isEqual, meta);\n  }\n\n  return comparator;\n};\n\n// comparator\nvar circularDeepEqual = createComparator(createCircularEqual());\nvar circularShallowEqual = createComparator(createCircularEqual(sameValueZeroEqual));\nvar deepEqual = createComparator();\nvar shallowEqual = createComparator(function () {\n  return sameValueZeroEqual;\n});\nvar index = {\n  circularDeep: circularDeepEqual,\n  circularShallow: circularShallowEqual,\n  createCustom: createComparator,\n  deep: deepEqual,\n  sameValueZero: sameValueZeroEqual,\n  shallow: shallowEqual\n};\n\nexport default index;\nexport { createComparator as createCustomEqual, sameValueZeroEqual, circularDeepEqual, circularShallowEqual, deepEqual, shallowEqual };\n//# sourceMappingURL=fast-equals.esm.js.map\n","// @flow\n\nexport const createGetInitialArgs = (size: number) =>\n  /**\n   * @private\n   *\n   * @function getInitialArgs\n   *\n   * @description\n   * take the first N number of items from the array (faster than slice)\n   *\n   * @param {Array<any>} args the args to take from\n   * @returns {Array<any>} the shortened list of args as an array\n   */\n  (args: Array<any>): Array<any> => {\n    if (size >= args.length) {\n      return args;\n    }\n\n    switch (size) {\n      case 0:\n        return [];\n\n      case 1:\n        return [args[0]];\n\n      case 2:\n        return [args[0], args[1]];\n\n      case 3:\n        return [args[0], args[1], args[2]];\n\n      case 4:\n        return [args[0], args[1], args[2], args[3]];\n\n      case 5:\n        return [args[0], args[1], args[2], args[3], args[4]];\n    }\n\n    return Array.prototype.slice.call(args, 0, size);\n  };\n","/**\n * @function first\n *\n * @description\n * get the first n number of items from the array as a new array (faster than native splice)\n *\n * @param {Array<any>} array the array to get the items from\n * @param {number} length the length to limit the size to\n * @returns {Array<any>} the array limited in size\n */\nexport var first = function first(array, length) {\n  var newArray = new Array(length);\n\n  for (var index = 0; index < length; index++) {\n    newArray[index] = array[index];\n  }\n\n  return newArray;\n};\n/**\n * @function getCircularValue\n *\n * @description\n * create a method that will get a placeholder for the circular value based\n * on the value saved in the cache for it\n *\n * @param {any} key the key of the object to stringify\n * @param {any} value the value of the object at key\n * @param {number} refCount the index of the ref\n * @returns {string} the circular value\n */\n\nexport var getCircularValue = function getCircularValue(key, value, refCount) {\n  return \"[ref-\" + refCount + \"]\";\n};\n/**\n * @function getValue\n *\n * @description\n * get the value passed (similar to an identity function)\n *\n * @param {any} key the key of the object to stringify\n * @param {any} value the value of the object at key\n * @returns {any} the value passed\n */\n\nexport var getValue = function getValue(key, value) {\n  return value;\n};\n/**\n * @function indexOf\n *\n * @description\n * get the index of the value in the array (faster than native indexOf)\n *\n * @param {Array<any>} array the array to get the index of the value at\n * @param {any} value the value to match\n * @returns {number} the index of the value in array\n */\n\nexport var indexOf = function indexOf(array, value) {\n  for (var index = 0; index < array.length; index++) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n\n  return -1;\n};\n/**\n * @function createReplacer\n *\n * @description\n * create a replacer method that handles circular values\n *\n * @param {function} [replacer] a custom replacer to use for non-circular values\n * @param {function} [circularReplacer] a custom replacer to use for circular methods\n * @returns {any} the value to stringify\n */\n\nexport var createReplacer = function createReplacer(replacer, circularReplacer) {\n  var getCircularReplacer = circularReplacer || getCircularValue;\n  var hasReplacer = typeof replacer === 'function';\n  var cache = [],\n      locationOfThis,\n      locationOfValue;\n  return function (key, value) {\n    if (cache.length) {\n      locationOfThis = indexOf(cache, this);\n\n      if (~locationOfThis) {\n        cache = first(cache, locationOfThis + 1);\n      } else {\n        cache[cache.length] = this;\n      }\n\n      locationOfValue = indexOf(cache, value);\n\n      if (~locationOfValue) {\n        return getCircularReplacer.call(this, key, value, locationOfValue);\n      }\n    } else {\n      cache[0] = value;\n    }\n\n    return hasReplacer ? replacer.call(this, key, value) : value;\n  };\n};","// utils\nimport { createReplacer } from './utils';\n/**\n * @function stringify\n *\n * @description\n * strinigifer that handles circular values\n *\n * @param {any} value the value to stringify\n * @param {function} [replacer] a custom replacer function for stringifying standard values\n * @param {number} [indent] the number of spaces to indent the output by\n * @param {function} [circularReplacer] a custom replacer function for stringifying circular values\n * @returns {string} the stringified output\n */\n\nexport default function stringify(value, replacer, indent, circularReplacer) {\n  return JSON.stringify(value, createReplacer(replacer, circularReplacer), indent);\n}","// @flow\n\n// external dependencies\nimport stringifySafe from 'fast-stringify';\n\n// types\nimport type {Options} from './types';\n\n// utils\nimport {\n  compose,\n  getArrayKey,\n} from './utils';\n\n/**\n * @private\n *\n * @function customReplacer\n *\n * @description\n * custom replacer for the stringify function\n *\n * @param {string} key key in json object\n * @param {*} value value in json object\n * @returns {*} if function then toString of it, else the value itself\n */\nexport const customReplacer = (key: string, value: any): any => (typeof value === 'function' ? `${value}` : value);\n\n/**\n * @private\n *\n * @function stringify\n *\n * @description\n * stringify with a custom replacer if circular, else use standard JSON.stringify\n *\n * @param {*} value value to stringify\n * @param {function} [replacer] replacer to used in stringification\n * @returns {string} the stringified version of value\n */\nexport const stringify = (value: any, replacer: ?Function): string => {\n  try {\n    return JSON.stringify(value, replacer);\n  } catch (exception) {\n    return stringifySafe(value, replacer);\n  }\n};\n\n/**\n * @private\n *\n * @function getStringifiedArgument\n *\n * @description\n * get the stringified version of the argument passed\n *\n * @param {*} arg argument to stringify\n * @param {function} [replacer] replacer to used in stringification\n * @returns {string} the stringified argument\n */\nexport const getStringifiedArgument = (arg: any, replacer: ?Function): string => {\n  const typeOfArg: string = typeof arg;\n\n  return arg && (typeOfArg === 'object' || typeOfArg === 'function') ? stringify(arg, replacer) : arg;\n};\n\n/**\n * @private\n *\n * @function createArgumentSerializer\n *\n * @description\n * create the internal argument serializer based on the options passed\n *\n * @param {Options} options the options passed to the moizer\n * @param {boolean} options.serializeFunctions should functions be included in the serialization\n * @param {number} options.maxArgs the cap on the number of arguments used in serialization\n * @returns {function(...Array<*>): string} argument serialization method\n */\nexport const createArgumentSerializer = (options: Options): Function => {\n  const replacer: ?Function = options.shouldSerializeFunctions ? customReplacer : null;\n\n  return (args: Array<any>): Array<string> => {\n    let key: string = '|';\n\n    for (let index: number = 0; index < args.length; index++) {\n      key += `${getStringifiedArgument(args[index], replacer)}|`;\n    }\n\n    return [key];\n  };\n};\n\n/**\n * @private\n *\n * @function getSerializerFunction\n *\n * @description\n * based on the options passed, either use the serializer passed or generate the internal one\n *\n * @param {Options} options the options passed to the moized function\n * @returns {function} the function to use in serializing the arguments\n */\nexport const getSerializerFunction = (options: Options): Function =>\n  /* eslint-disable operator-linebreak */\n  typeof options.serializer === 'function'\n    ? // $FlowIgnore serializer is a function\n    compose(\n      getArrayKey,\n      options.serializer\n    )\n    : createArgumentSerializer(options);\n/* eslint-enable */\n\n/**\n * @private\n *\n * @function getIsSerializedKeyEqual\n *\n * @description\n * are the serialized keys equal to one another\n *\n * @param {Array<string>} cacheKey the cache key to compare\n * @param {*} key the key to test\n * @returns {boolean} are the keys equal\n */\nexport const getIsSerializedKeyEqual = (cacheKey: Array<string>, key: Array<string>): boolean => cacheKey[0] === key[0];\n","// @flow\n\n// external dependencies\nimport {\n  deepEqual,\n  sameValueZeroEqual,\n  shallowEqual,\n} from 'fast-equals';\n\n// max args\nimport {createGetInitialArgs} from './maxArgs';\n\n// serialize\nimport {\n  getIsSerializedKeyEqual,\n  getSerializerFunction,\n} from './serialize';\n\n// types\nimport type {\n  Cache,\n  MicroMemoizeOptions,\n  Options,\n} from './types';\n\n// utils\nimport {\n  compose,\n  getArrayKey,\n} from './utils';\n\nexport const createOnCacheOperation = (fn: ?Function): ?Function => {\n  if (typeof fn === 'function') {\n    return (cache: Cache, _microMemoizeOptions: MicroMemoizeOptions, memoized: Function): void =>\n      // $FlowIgnore fn is a function if this is hit\n      fn(memoized.cache, memoized.options, memoized);\n  }\n};\n\n/**\n * @private\n *\n * @function getIsEqual\n *\n * @description\n * get the isEqual method passed to micro-memoize\n *\n * @param {Options} options the options passed to the moizer\n * @returns {function} the isEqual method to apply\n */\nexport const getIsEqual = ({equals, isDeepEqual, isReact}: Options): Function =>\n  equals || (isDeepEqual && deepEqual) || (isReact && shallowEqual) || sameValueZeroEqual;\n\n/**\n * @private\n *\n * @function getIsMatchingKey\n *\n * @description\n * get the isEqual method passed to micro-memoize\n *\n * @param {Options} options the options passed to the moizer\n * @returns {function} the isEqual method to apply\n */\nexport const getIsMatchingKey = ({isSerialized, matchesKey}: Options): ?Function =>\n  matchesKey || (isSerialized && getIsSerializedKeyEqual) || undefined;\n\n/**\n * @private\n *\n * @function getTransformKey\n *\n * @description\n * get the function that will transform the key based on the arguments passed\n *\n * @param {Options} options the options passed to the moizer\n * @returns {function|void} the function to transform the key with\n */\nexport const getTransformKey = (options: Options): ?Function => {\n  const {maxArgs, isReact, isSerialized, transformArgs} = options;\n\n  return compose(\n    isSerialized && getSerializerFunction(options),\n    typeof transformArgs === 'function'\n      && compose(\n        getArrayKey,\n        transformArgs\n      ),\n    isReact && createGetInitialArgs(2),\n    typeof maxArgs === 'number' && createGetInitialArgs(maxArgs)\n  );\n};\n","// @flow\n\n// external dependencies\nimport memoize from 'micro-memoize';\n\n// constants\nimport {DEFAULT_OPTIONS} from './constants';\n\n// instance\nimport {augmentMoizeInstance} from './instance';\n\n// max age\nimport {getMaxAgeOptions} from './maxAge';\n\n// options\nimport {\n  createOnCacheOperation,\n  getIsEqual,\n  getIsMatchingKey,\n  getTransformKey,\n} from './options';\n\n// stats\nimport {\n  collectStats,\n  getDefaultProfileName,\n  getStats,\n  getStatsOptions,\n  statsCache,\n} from './stats';\n\n// types\nimport type {\n  Expiration,\n  MicroMemoizeOptions,\n  Options,\n} from './types';\n\n// utils\nimport {\n  combine,\n  compose,\n  mergeOptions,\n} from './utils';\n\n/**\n * @module moize\n */\n\nexport {collectStats};\n\n/**\n * @function moize\n *\n * @description\n * memoize a function based its arguments passed, potentially improving runtime performance\n *\n * @example\n * import moize from 'moize';\n *\n * // standard implementation\n * const fn = (foo, bar) => `${foo} ${bar}`;\n * const memoizedFn = moize(fn);\n *\n * // implementation with options\n * const fn = async (id) => get(`http://foo.com/${id}`);\n * const memoizedFn = moize(fn, {isPromise: true, maxSize: 5});\n *\n * // implementation with convenience methods\n * const Foo = ({foo}) => <div>{foo}</div>;\n * const MemoizedFoo = moize.react(Foo);\n *\n * @param {function|Options} fn the function to memoized, or a list of options when currying\n * @param {Options} [options=DEFAULT_OPTIONS] the options to apply\n * @returns {function} the memoized function\n */\nfunction moize(fn: Function | Options, options: Options = DEFAULT_OPTIONS): Function {\n  if (fn.isMoized) {\n    // $FlowIgnore if moized, originalFunction and options exist\n    return moize(fn.originalFunction, mergeOptions(fn.options, options));\n  }\n\n  if (typeof fn === 'object') {\n    return (curriedFn: Function | Options, curriedOptions: Options = {}) =>\n      /* eslint-disable operator-linebreak */\n      typeof curriedFn === 'function'\n        ? // $FlowIgnore fn is actually an object of options\n        moize(curriedFn, mergeOptions(fn, curriedOptions))\n        : // $FlowIgnore fn is actually an object of options\n        moize(mergeOptions(fn, curriedFn));\n    /* eslint-enable */\n  }\n\n  const coalescedOptions: Options = Object.assign({}, DEFAULT_OPTIONS, options, {\n    maxArgs: typeof options.maxArgs === 'number' && options.maxArgs >= 0 ? options.maxArgs : DEFAULT_OPTIONS.maxArgs,\n    maxSize: typeof options.maxSize === 'number' && options.maxSize >= 0 ? options.maxSize : DEFAULT_OPTIONS.maxSize,\n    profileName: options.profileName || getDefaultProfileName(fn),\n  });\n  const expirations: Array<Expiration> = [];\n\n  const {\n    equals: equalsIgnored,\n    isDeepEqual: isDeepEqualIgnored,\n    isPromise,\n    isReact: isReactIgnored,\n    isSerialized: isSerialzedIgnored,\n    matchesKey: matchesKeyIgnored,\n    maxAge: maxAgeIgnored,\n    maxArgs: maxArgsIgnored,\n    maxSize,\n    onCacheAdd,\n    onCacheChange,\n    onCacheHit,\n    onExpire: onExpireIgnored,\n    profileName: profileNameIgnored,\n    shouldSerializeFunctions: shouldSerializeFunctionsIgnored,\n    serializer: serializerIgnored,\n    transformArgs: transformArgsIgnored,\n    updateExpire: updateExpireIgnored,\n    ...customOptions\n  } = coalescedOptions;\n\n  const isEqual: Function = getIsEqual(coalescedOptions);\n  const isMatchingKey: ?Function = getIsMatchingKey(coalescedOptions);\n  const maxAgeOptions: Options = getMaxAgeOptions(expirations, coalescedOptions, isEqual, isMatchingKey);\n  const statsOptions: Options = getStatsOptions(coalescedOptions);\n  const transformKey: ?Function = getTransformKey(coalescedOptions);\n\n  const microMemoizeOptions: MicroMemoizeOptions = Object.assign({}, customOptions, {\n    isEqual,\n    isMatchingKey,\n    isPromise,\n    maxSize,\n    onCacheAdd: createOnCacheOperation(combine(onCacheAdd, maxAgeOptions.onCacheAdd, statsOptions.onCacheAdd)),\n    onCacheChange: createOnCacheOperation(onCacheChange),\n    onCacheHit: createOnCacheOperation(combine(onCacheHit, maxAgeOptions.onCacheHit, statsOptions.onCacheHit)),\n    transformKey,\n  });\n\n  return augmentMoizeInstance(memoize(fn, microMemoizeOptions), {\n    expirations,\n    options: coalescedOptions,\n    originalFunction: fn,\n  });\n}\n\n/**\n * @function\n * @name collectStats\n * @memberof module:moize\n * @alias moize.collectStats\n *\n * @description\n * start collecting statistics\n */\nmoize.collectStats = collectStats;\n\n/**\n * @function\n * @name compose\n * @memberof module:moize\n * @alias moize.compose\n *\n * @description\n * method to compose moized methods and return a single moized function\n *\n * @param {...Array<(function)>} functions the functions to compose\n * @returns {function(...Array<*>): *} the composed function\n */\nmoize.compose = function(): Function {\n  // eslint-disable-next-line prefer-rest-params\n  return compose.apply(null, arguments) || moize;\n};\n\n/**\n * @function\n * @name deep\n * @memberof module:moize\n * @alias moize.deep\n *\n * @description\n * should deep equality check be used\n *\n * @returns {function} the moizer function\n */\nmoize.deep = moize({isDeepEqual: true});\n\n/**\n * @function\n * @name getStats\n * @memberof module:moize\n * @alias moize.getStats\n *\n * @description\n * get the statistics of a given profile, or overall usage\n *\n * @returns {StatsProfile} statistics for a given profile or overall usage\n */\nmoize.getStats = getStats;\n\n/**\n * @function\n * @name isCollectingStats\n * @memberof module:moize\n * @alias moize.isCollectingStats\n *\n * @description\n * are stats being collected\n *\n * @returns {boolean} are stats being collected\n */\nmoize.isCollectingStats = function isCollectingStats(): boolean {\n  return statsCache.isCollectingStats;\n};\n\n/**\n * @function\n * @name isMoized\n * @memberof module:moize\n * @alias moize.isMoized\n *\n * @description\n * is the fn passed a moized function\n *\n * @param {*} fn the object to test\n * @returns {boolean} is fn a moized function\n */\nmoize.isMoized = function isMoized(fn: any): boolean {\n  return typeof fn === 'function' && !!fn.isMoized;\n};\n\n/**\n * @function\n * @name maxAge\n * @memberof module:moize\n * @alias moize.maxAge\n *\n * @description\n * a moized method where the age of the cache is limited to the number of milliseconds passed\n *\n * @param {number} maxAge the TTL of the value in cache\n * @returns {function} the moizer function\n */\nmoize.maxAge = function maxAge(maxAge: number): Function {\n  return moize({maxAge});\n};\n\n/**\n * @function\n * @name maxArgs\n * @memberof module:moize\n * @alias moize.maxArgs\n *\n * @description\n * a moized method where the number of arguments used for determining cache is limited to the value passed\n *\n * @param {number} maxArgs the number of args to base the key on\n * @returns {function} the moizer function\n */\nmoize.maxArgs = function maxArgs(maxArgs: number): Function {\n  return moize({maxArgs});\n};\n\n/**\n * @function\n * @name maxSize\n * @memberof module:moize\n * @alias moize.maxSize\n *\n * @description\n * a moized method where the total size of the cache is limited to the value passed\n *\n * @param {number} maxSize the maximum size of the cache\n * @returns {function} the moizer function\n */\nmoize.maxSize = function maxSize(maxSize: number): Function {\n  return moize({maxSize});\n};\n\n/**\n * @function\n * @name promise\n * @memberof module:moize\n * @alias moize.promise\n *\n * @description\n * a moized method specific to caching resolved promise / async values\n *\n * @returns {function} the moizer function\n */\nmoize.promise = moize({\n  isPromise: true,\n  updateExpire: true,\n});\n\n/**\n * @function\n * @name react\n * @memberof module:moize\n * @alias moize.react\n *\n * @description\n * a moized method specific to caching React element values\n *\n * @returns {function} the moizer function\n */\nmoize.react = moize({isReact: true});\n\n/**\n * @function\n * @name reactSimple\n * @memberof module:moize\n * @alias moize.reactSimple\n *\n * @description\n * a moized method specific to caching React element values, limiting to only the most recent result\n *\n * @returns {function} the moizer function\n */\nmoize.reactSimple = moize({\n  isReact: true,\n  maxSize: 1,\n});\n\n/**\n * @function\n * @name serialize\n * @memberof module:moize\n * @alias moize.serialize\n *\n * @description\n * a moized method that will serialize the arguments passed to use as the cache key\n *\n * @returns {function} the moizer function\n */\nmoize.serialize = moize({isSerialized: true});\n\n/**\n * @function\n * @name simple\n * @memberof module:moize\n * @alias moize.simple\n *\n * @description\n * a moized method that will limit the cache values to only the most recent result\n *\n * @returns {function} the moizer function\n */\nmoize.simple = moize({maxSize: 1});\n\nexport default moize;\n"],"names":["_objectWithoutPropertiesLoose","DEFAULT_OPTIONS","equals","undefined","isDeepEqual","isPromise","isReact","isSerialized","matchesKey","maxAge","maxArgs","maxSize","Infinity","onExpire","profileName","serializer","shouldSerializeFunctions","transformArgs","updateExpire","combine","functions","length","reduce","f","g","apply","arguments","compose","findExpirationIndex","expirations","key","index","createFindKeyIndex","isEqual","isMatchingKey","areKeysEqual","cacheKey","keys","keysIndex","getArrayKey","Array","isArray","mergeOptions","originalOptions","newOptions","Object","assign","onCacheAdd","onCacheChange","onCacheHit","clearExpiration","shouldRemove","expirationIndex","clearTimeout","timeoutId","splice","createOnCacheAddSetExpiration","options","findKeyIndex","cache","moizedOptions","moized","expirationMethod","keyIndex","value","values","unshift","push","setTimeout","createOnCacheHitResetExpiration","getMaxAgeOptions","isFinite","statsCache","anonymousProfileNameCounter","isCollectingStats","profiles","hasWarningDisplayed","collectStats","createOnCacheAddIncrementCalls","calls","hits","createOnCacheHitIncrementCallsAndHits","getDefaultProfileName","fn","stack","Error","fnName","displayName","name","lines","split","slice","line","profileNameLocation","indexOf","replace","trim","getUsagePercentage","toFixed","getStats","console","warn","usage","profile","completeStats","getStatsOptions","addInstanceMethods","transformKey","add","savedKey","size","pop","clear","get","has","cacheSnapshot","remove","existingKey","update","orderByLru","addInstanceProperties","moizeOptions","originalFunction","microMemoizeOptions","defineProperties","_microMemoizeOptions","configurable","expirationsSnapshot","isMoized","contextTypes","defaultProps","propTypes","augmentMoizeInstance","configuration","createGetInitialArgs","args","prototype","call","customReplacer","stringify","replacer","JSON","exception","stringifySafe","getStringifiedArgument","arg","typeOfArg","createArgumentSerializer","getSerializerFunction","getIsSerializedKeyEqual","createOnCacheOperation","memoized","getIsEqual","deepEqual","shallowEqual","sameValueZeroEqual","getIsMatchingKey","getTransformKey","moize","curriedFn","curriedOptions","coalescedOptions","equalsIgnored","isDeepEqualIgnored","isReactIgnored","isSerialzedIgnored","matchesKeyIgnored","maxAgeIgnored","maxArgsIgnored","onExpireIgnored","profileNameIgnored","shouldSerializeFunctionsIgnored","serializerIgnored","transformArgsIgnored","updateExpireIgnored","customOptions","maxAgeOptions","statsOptions","memoize","deep","promise","react","reactSimple","serialize","simple"],"mappings":";;;;;;;;;;;;;;;;;;;;;EAAA;EACA,IAAI,cAAc,GAAG,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC;EACrD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAO,IAAI,MAAM,GAAG,SAAS,MAAM,CAAC,MAAM,EAAE;EAC5C,EAAE,IAAI,MAAM,CAAC;;EAEb,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,IAAI,SAAS,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE;EAC3F,IAAI,MAAM,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,IAAI,SAAS,CAAC,MAAM,IAAI,KAAK,GAAG,CAAC,GAAG,SAAS,GAAG,SAAS,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;;EAE/F,IAAI,IAAI,MAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;EAC9C,MAAM,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE;EAC9B,QAAQ,IAAI,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;EAC9C,UAAU,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;EACpC,SAAS;EACT,OAAO;EACP,KAAK;EACL,GAAG;;EAEH,EAAE,OAAO,MAAM,CAAC;EAChB,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAO,IAAI,UAAU,GAAG,SAAS,UAAU,CAAC,SAAS,EAAE;EACvD,EAAE,IAAI,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC;;EAEhC,EAAE,IAAI,CAAC,MAAM,EAAE;EACf,IAAI,OAAO,EAAE,CAAC;EACd,GAAG;;EAEH,EAAE,IAAI,MAAM,KAAK,CAAC,EAAE;EACpB,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;EAC1B,GAAG;;EAEH,EAAE,IAAI,MAAM,KAAK,CAAC,EAAE;EACpB,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;EACxC,GAAG;;EAEH,EAAE,IAAI,MAAM,KAAK,CAAC,EAAE;EACpB,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;EACtD,GAAG;;EAEH,EAAE,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;;EAEhC,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,MAAM,EAAE,KAAK,EAAE,EAAE;EAC/C,IAAI,KAAK,CAAC,KAAK,CAAC,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC;EACpC,GAAG;;EAEH,EAAE,OAAO,KAAK,CAAC;EACf,CAAC,CAAC;AACF,EAAO,IAAI,kBAAkB,GAAG,SAAS,kBAAkB,CAAC,OAAO;EACnE;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,EAAE;EACF,EAAE,OAAO,UAAU,KAAK,EAAE,KAAK,EAAE;EACjC,IAAI,IAAI,KAAK,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE;EACvC,MAAM,OAAO,KAAK,CAAC;EACnB,KAAK;;EAEL,IAAI,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG,KAAK,CAAC,MAAM,EAAE,KAAK,GAAG,MAAM,EAAE,KAAK,EAAE,EAAE;EACxE,MAAM,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;EAChD,QAAQ,OAAO,KAAK,CAAC;EACrB,OAAO;EACP,KAAK;;EAEL,IAAI,OAAO,IAAI,CAAC;EAChB,GAAG,CAAC;EACJ,CAAC,CAAC;AACF,EAAO,IAAI,iBAAiB,GAAG,SAAS,iBAAiB,CAAC,OAAO,EAAE,aAAa,EAAE;EAClF,EAAE,IAAI,YAAY,GAAG,OAAO,aAAa,KAAK,UAAU,GAAG,aAAa,GAAG,kBAAkB,CAAC,OAAO,CAAC,CAAC;EACvG;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,EAAE,OAAO,UAAU,OAAO,EAAE,WAAW,EAAE;EACzC,IAAI,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;EACzD,MAAM,IAAI,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,WAAW,CAAC,EAAE;EACrD,QAAQ,OAAO,KAAK,CAAC;EACrB,OAAO;EACP,KAAK;;EAEL,IAAI,OAAO,CAAC,CAAC,CAAC;EACd,GAAG,CAAC;EACJ,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAO,IAAI,eAAe,GAAG,SAAS,eAAe,CAAC,OAAO,EAAE,OAAO,EAAE;EACxE,EAAE,OAAO,OAAO,KAAK,OAAO,IAAI,OAAO,KAAK,OAAO,IAAI,OAAO,KAAK,OAAO,CAAC;EAC3E,CAAC,CAAC;AACF,EAAO,IAAI,gBAAgB,GAAG,SAAS,gBAAgB,CAAC,YAAY,EAAE,cAAc,EAAE,eAAe,EAAE,EAAE,CAAC;EAC1G;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAO,IAAI,UAAU,GAAG,SAAS,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE,aAAa,EAAE;EACzE,EAAE,IAAI,KAAK,GAAG,aAAa,CAAC;;EAE5B,EAAE,OAAO,KAAK,EAAE,EAAE;EAClB,IAAI,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;EACpC,GAAG;;EAEH,EAAE,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;EACnB,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAO,IAAI,uBAAuB,GAAG,SAAS,uBAAuB,CAAC,OAAO,EAAE;EAC/E,EAAE,IAAI,WAAW,GAAG,iBAAiB,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,aAAa,CAAC,CAAC;EAC9E,EAAE,OAAO,UAAU,KAAK,EAAE,QAAQ,EAAE;EACpC,IAAI,IAAI,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;EAC5B,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU,KAAK,EAAE;EAC5D,MAAM,OAAO,CAAC,UAAU,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;EACnD,MAAM,OAAO,CAAC,aAAa,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;EACtD,MAAM,OAAO,KAAK,CAAC;EACnB,KAAK,CAAC,CAAC,KAAK,CAAC,UAAU,KAAK,EAAE;EAC9B,MAAM,IAAI,QAAQ,GAAG,WAAW,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;;EAElD,MAAM,IAAI,CAAC,QAAQ,EAAE;EACrB,QAAQ,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;EACvC,QAAQ,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;EACzC,OAAO;;EAEP,MAAM,MAAM,KAAK,CAAC;EAClB,KAAK,CAAC,CAAC;EACP,GAAG,CAAC;EACJ,CAAC;;ECrLD,SAASA,+BAA6B,CAAC,MAAM,EAAE,QAAQ,EAAE,EAAE,IAAI,MAAM,IAAI,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC,IAAI,MAAM,GAAG,EAAE,CAAC,CAAC,IAAI,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,SAAS,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,OAAO,MAAM,CAAC,EAAE;AACnT,EAIA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAe,SAAS,OAAO,CAAC,EAAE,EAAE,OAAO,EAAE;EAC7C;EACA,EAAE,IAAI,EAAE,CAAC,UAAU,EAAE;EACrB,IAAI,OAAO,EAAE,CAAC;EACd,GAAG;;EAEH,EAAE,IAAI,IAAI,GAAG,OAAO,IAAI,EAAE;EAC1B,MAAM,YAAY,GAAG,IAAI,CAAC,OAAO;EACjC,MAAM,OAAO,GAAG,YAAY,KAAK,KAAK,CAAC,GAAG,eAAe,GAAG,YAAY;EACxE,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa;EACxC,MAAM,cAAc,GAAG,IAAI,CAAC,SAAS;EACrC,MAAM,SAAS,GAAG,cAAc,KAAK,KAAK,CAAC,GAAG,KAAK,GAAG,cAAc;EACpE,MAAM,YAAY,GAAG,IAAI,CAAC,OAAO;EACjC,MAAM,OAAO,GAAG,YAAY,KAAK,KAAK,CAAC,GAAG,CAAC,GAAG,YAAY;EAC1D,MAAM,eAAe,GAAG,IAAI,CAAC,UAAU;EACvC,MAAM,UAAU,GAAG,eAAe,KAAK,KAAK,CAAC,GAAG,gBAAgB,GAAG,eAAe;EAClF,MAAM,kBAAkB,GAAG,IAAI,CAAC,aAAa;EAC7C,MAAM,aAAa,GAAG,kBAAkB,KAAK,KAAK,CAAC,GAAG,gBAAgB,GAAG,kBAAkB;EAC3F,MAAM,eAAe,GAAG,IAAI,CAAC,UAAU;EACvC,MAAM,UAAU,GAAG,eAAe,KAAK,KAAK,CAAC,GAAG,gBAAgB,GAAG,eAAe;EAClF,MAAM,YAAY,GAAG,IAAI,CAAC,YAAY;EACtC,MAAM,YAAY,GAAGA,+BAA6B,CAAC,IAAI,EAAE,CAAC,SAAS,EAAE,eAAe,EAAE,WAAW,EAAE,SAAS,EAAE,YAAY,EAAE,eAAe,EAAE,YAAY,EAAE,cAAc,CAAC,CAAC,CAAC;;EAE5K,EAAE,IAAI,iBAAiB,GAAG,MAAM,CAAC,EAAE,EAAE,YAAY,EAAE;EACnD,IAAI,OAAO,EAAE,OAAO;EACpB,IAAI,aAAa,EAAE,aAAa;EAChC,IAAI,SAAS,EAAE,SAAS;EACxB,IAAI,OAAO,EAAE,OAAO;EACpB,IAAI,UAAU,EAAE,UAAU;EAC1B,IAAI,aAAa,EAAE,aAAa;EAChC,IAAI,UAAU,EAAE,UAAU;EAC1B,IAAI,YAAY,EAAE,YAAY;EAC9B,GAAG,CAAC,CAAC;EACL,EAAE,IAAI,WAAW,GAAG,iBAAiB,CAAC,OAAO,EAAE,aAAa,CAAC,CAAC;EAC9D,EAAE,IAAI,iBAAiB,GAAG,uBAAuB,CAAC,iBAAiB,CAAC,CAAC;EACrE,EAAE,IAAI,oBAAoB,GAAG,CAAC,EAAE,YAAY,IAAI,aAAa,CAAC,CAAC;EAC/D,EAAE,IAAI,KAAK,GAAG;EACd,IAAI,IAAI,EAAE,EAAE;;EAEZ,IAAI,IAAI,IAAI,GAAG;EACf,MAAM,OAAO,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC;EAC/B,KAAK;;EAEL,IAAI,MAAM,EAAE,EAAE;EACd,GAAG,CAAC;EACJ,EAAE,IAAI,IAAI,GAAG,KAAK,CAAC,IAAI;EACvB,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;EAC5B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,EAAE,SAAS,QAAQ,GAAG;EACtB,IAAI,IAAI,IAAI,GAAG,SAAS,CAAC;EACzB,IAAI,IAAI,cAAc,GAAG,oBAAoB,GAAG,UAAU,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;EACxE,IAAI,IAAI,GAAG,GAAG,YAAY,GAAG,YAAY,CAAC,cAAc,CAAC,GAAG,cAAc,CAAC;EAC3E,IAAI,IAAI,QAAQ,GAAG,WAAW,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;;EAE1C,IAAI,IAAI,CAAC,QAAQ,EAAE;EACnB,MAAM,UAAU,CAAC,KAAK,EAAE,iBAAiB,EAAE,QAAQ,CAAC,CAAC;;EAErD,MAAM,IAAI,QAAQ,EAAE;EACpB,QAAQ,UAAU,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,CAAC;EACnD,QAAQ,UAAU,CAAC,MAAM,EAAE,MAAM,CAAC,QAAQ,CAAC,EAAE,QAAQ,CAAC,CAAC;EACvD,QAAQ,aAAa,CAAC,KAAK,EAAE,iBAAiB,EAAE,QAAQ,CAAC,CAAC;EAC1D,OAAO;EACP,KAAK,MAAM;EACX,MAAM,IAAI,IAAI,CAAC,MAAM,IAAI,OAAO,EAAE;EAClC,QAAQ,IAAI,CAAC,GAAG,EAAE,CAAC;EACnB,QAAQ,MAAM,CAAC,GAAG,EAAE,CAAC;EACrB,OAAO;;EAEP,MAAM,IAAI,MAAM,GAAG,oBAAoB,GAAG,GAAG,GAAG,UAAU,CAAC,cAAc,CAAC,CAAC;EAC3E,MAAM,IAAI,QAAQ,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;EAC1C,MAAM,UAAU,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;EAC5C,MAAM,UAAU,CAAC,MAAM,EAAE,QAAQ,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;;EAElD,MAAM,IAAI,SAAS,EAAE;EACrB,QAAQ,iBAAiB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;EAC3C,OAAO;;EAEP,MAAM,UAAU,CAAC,KAAK,EAAE,iBAAiB,EAAE,QAAQ,CAAC,CAAC;EACrD,MAAM,aAAa,CAAC,KAAK,EAAE,iBAAiB,EAAE,QAAQ,CAAC,CAAC;EACxD,KAAK;;EAEL,IAAI,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC;EACrB,GAAG;;EAEH,EAAE,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE;EACpC,IAAI,KAAK,EAAE;EACX,MAAM,YAAY,EAAE,IAAI;EACxB,MAAM,GAAG,EAAE,SAAS,GAAG,GAAG;EAC1B,QAAQ,OAAO,KAAK,CAAC;EACrB,OAAO;EACP,KAAK;EACL,IAAI,aAAa,EAAE;EACnB,MAAM,YAAY,EAAE,IAAI;EACxB,MAAM,GAAG,EAAE,SAAS,GAAG,GAAG;EAC1B,QAAQ,OAAO;EACf,UAAU,IAAI,EAAE,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC;EACtC,UAAU,IAAI,EAAE,KAAK,CAAC,IAAI;EAC1B,UAAU,MAAM,EAAE,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC;EAC1C,SAAS,CAAC;EACV,OAAO;EACP,KAAK;EACL,IAAI,UAAU,EAAE;EAChB,MAAM,YAAY,EAAE,IAAI;EACxB,MAAM,GAAG,EAAE,SAAS,GAAG,GAAG;EAC1B,QAAQ,OAAO,IAAI,CAAC;EACpB,OAAO;EACP,KAAK;EACL,IAAI,OAAO,EAAE;EACb,MAAM,YAAY,EAAE,IAAI;EACxB,MAAM,GAAG,EAAE,SAAS,GAAG,GAAG;EAC1B,QAAQ,OAAO,iBAAiB,CAAC;EACjC,OAAO;EACP,KAAK;EACL,GAAG,CAAC,CAAC;EACL,EAAE,OAAO,QAAQ,CAAC;EAClB;;EC5IA;;EAGA;;;;;AAKA,EAAO,IAAMC,eAAwB,GAAG;EACtCC,EAAAA,MAAM,EAAEC,SAD8B;EAEtCC,EAAAA,WAAW,EAAE,KAFyB;EAGtCC,EAAAA,SAAS,EAAE,KAH2B;EAItCC,EAAAA,OAAO,EAAE,KAJ6B;EAKtCC,EAAAA,YAAY,EAAE,KALwB;EAMtCC,EAAAA,UAAU,EAAEL,SAN0B;EAOtCM,EAAAA,MAAM,EAAEN,SAP8B;EAQtCO,EAAAA,OAAO,EAAEP,SAR6B;EAStCQ,EAAAA,OAAO,EAAEC,QAT6B;EAUtCC,EAAAA,QAAQ,EAAEV,SAV4B;EAWtCW,EAAAA,WAAW,EAAEX,SAXyB;EAYtCY,EAAAA,UAAU,EAAEZ,SAZ0B;EAatCa,EAAAA,wBAAwB,EAAE,KAbY;EActCC,EAAAA,aAAa,EAAEd,SAduB;EAetCe,EAAAA,YAAY,EAAE;EAfwB,CAAjC;;ECRP;AACA;EAQA;;;;;;;;;;;AAWA,EAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAyC;EAAA,oCAArCC,SAAqC;EAArCA,IAAAA,SAAqC;EAAA;;EAC9D,MAAIA,SAAS,CAACC,MAAd,EAAsB;EACpB,WAAOD,SAAS,CAACE,MAAV;EAEL,cAACC,CAAD,EAAcC,CAAd;EAAA,aACE,OAAOD,CAAP,KAAa,UAAb,GACI,OAAOC,CAAP,KAAa,UAAb,GACE,YAAgB;EAChB;EACAA,QAAAA,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAcC,SAAd,EAFgB;;EAIhBH,QAAAA,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAcC,SAAd;EACD,OAND,GAOEH,CARN,GASI,OAAOC,CAAP,KAAa,UAAb,GACEA,CADF,GAEErB,SAZR;EAAA,KAFK,CAAP;EAgBD;EACF,CAnBM;EAqBP;;;;;;;;;;;;AAWA,EAAO,IAAMwB,OAAO,GAAG,SAAVA,OAAU,GAAyC;EAAA,qCAArCP,SAAqC;EAArCA,IAAAA,SAAqC;EAAA;;EAC9D,MAAIA,SAAS,CAACC,MAAd,EAAsB;EACpB,WAAOD,SAAS,CAACE,MAAV;EAEL,cAACC,CAAD,EAAcC,CAAd;EAAA,aACE,OAAOD,CAAP,KAAa,UAAb,GACI,OAAOC,CAAP,KAAa,UAAb,GACE,YAAgB;EAChB;EACA,eAAOD,CAAC,CAACC,CAAC,CAACC,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAD,CAAR;EACD,OAJD,GAKEH,CANN,GAOI,OAAOC,CAAP,KAAa,UAAb,GACEA,CADF,GAEErB,SAVR;EAAA,KAFK,CAAP;EAcD;EACF,CAjBM;EAmBP;;;;;;;;;;;;;AAYA,EAAO,IAAMyB,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,WAAD,EAAiCC,GAAjC,EAA6D;EAC9F,OAAK,IAAIC,KAAa,GAAG,CAAzB,EAA4BA,KAAK,GAAGF,WAAW,CAACR,MAAhD,EAAwDU,KAAK,EAA7D,EAAiE;EAC/D,QAAIF,WAAW,CAACE,KAAD,CAAX,CAAmBD,GAAnB,KAA2BA,GAA/B,EAAoC;EAClC,aAAOC,KAAP;EACD;EACF;;EAED,SAAO,CAAC,CAAR;EACD,CARM;AAUP,EAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,OAAD,EAAoBC,aAApB,EAAiD;EACjF,MAAMC,YAAsB,GAC1B,OAAOD,aAAP,KAAyB,UAAzB,GACIA,aADJ,GAEI,UAACE,QAAD,EAAuBN,GAAvB,EAA2C;EAC3C,SAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGD,GAAG,CAACT,MAAhC,EAAwCU,KAAK,EAA7C,EAAiD;EAC/C,UAAI,CAACE,OAAO,CAACG,QAAQ,CAACL,KAAD,CAAT,EAAkBD,GAAG,CAACC,KAAD,CAArB,CAAZ,EAA2C;EACzC,eAAO,KAAP;EACD;EACF;;EAED,WAAO,IAAP;EACD,GAXL;EAaA;;;;;;;;;;;;;EAYA,SAAO,UAACM,IAAD,EAA0BP,GAA1B,EAAsD;EAC3D,SAAK,IAAIQ,SAAS,GAAG,CAArB,EAAwBA,SAAS,GAAGD,IAAI,CAAChB,MAAzC,EAAiDiB,SAAS,EAA1D,EAA8D;EAC5D,UAAID,IAAI,CAACC,SAAD,CAAJ,CAAgBjB,MAAhB,KAA2BS,GAAG,CAACT,MAAnC,EAA2C;EACzC,YAAIc,YAAY,CAACE,IAAI,CAACC,SAAD,CAAL,EAAkBR,GAAlB,CAAhB,EAAwC;EACtC,iBAAOQ,SAAP;EACD;EACF;EACF;;EAED,WAAO,CAAC,CAAR;EACD,GAVD;EAWD,CArCM;EAuCP;;;;;;;;;;;;AAWA,EAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACT,GAAD;EAAA,SAA2BU,KAAK,CAACC,OAAN,CAAcX,GAAd,IAAqBA,GAArB,GAA2B,CAACA,GAAD,CAAtD;EAAA,CAApB;EAEP;;;;;;;;;;;;;AAYA,EAAO,IAAMY,YAAY,GAAG,SAAfA,YAAe,CAACC,eAAD,EAA2BC,UAA3B;EAAA,SAC1BA,UAAU,KAAK3C,eAAf,GACI0C,eADJ,GAEIE,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBH,eAAlB,EAAmCC,UAAnC,EAA+C;EAC/C;EACAG,IAAAA,UAAU,EAAE5B,OAAO,CAACwB,eAAe,CAACI,UAAjB,EAA6BH,UAAU,CAACG,UAAxC,CAF4B;EAG/C;EACAC,IAAAA,aAAa,EAAE7B,OAAO,CAACwB,eAAe,CAACK,aAAjB,EAAgCJ,UAAU,CAACI,aAA3C,CAJyB;EAK/C;EACAC,IAAAA,UAAU,EAAE9B,OAAO,CAACwB,eAAe,CAACM,UAAjB,EAA6BL,UAAU,CAACK,UAAxC,CAN4B;EAO/C;EACAhC,IAAAA,aAAa,EAAEU,OAAO,CACpBgB,eAAe,CAAC1B,aADI,EAEpB2B,UAAU,CAAC3B,aAFS;EARyB,GAA/C,CAHsB;EAAA,CAArB;;EC7JP;AAOA,EAMA;;;;;;;;;;;;;AAYA,EAAO,IAAMiC,eAAyB,GAAG,SAA5BA,eAA4B,CAACrB,WAAD,EAAiCC,GAAjC,EAA2CqB,YAA3C,EAAqE;EAC5G,MAAMC,eAAe,GAAGxB,mBAAmB,CAACC,WAAD,EAAcC,GAAd,CAA3C;;EAEA,MAAI,CAACsB,eAAL,EAAsB;EACpBC,IAAAA,YAAY,CAACxB,WAAW,CAACuB,eAAD,CAAX,CAA6BE,SAA9B,CAAZ;;EAEA,QAAIH,YAAJ,EAAkB;EAChBtB,MAAAA,WAAW,CAAC0B,MAAZ,CAAmBH,eAAnB,EAAoC,CAApC;EACD;EACF;EACF,CAVM;AAYP,EAAO,IAAMI,6BAAuC,GAAG,SAA1CA,6BAA0C,CACrD3B,WADqD,EAErD4B,OAFqD,EAGrDxB,OAHqD,EAIrDC,aAJqD,EAKvC;EAAA,MACPzB,MADO,GAC4BgD,OAD5B,CACPhD,MADO;EAAA,MACCuC,aADD,GAC4BS,OAD5B,CACCT,aADD;EAAA,MACgBnC,QADhB,GAC4B4C,OAD5B,CACgB5C,QADhB;EAGd,MAAM6C,YAAsB,GAAG1B,kBAAkB,CAACC,OAAD,EAAUC,aAAV,CAAjD;EAEA;;;;;;;;;;;;;;;;EAeA,SAAO,SAASa,UAAT,CAAoBY,KAApB,EAAkCC,aAAlC,EAA0DC,MAA1D,EAAuF;EAC5F,QAAM/B,GAAQ,GAAG6B,KAAK,CAACtB,IAAN,CAAW,CAAX,CAAjB;;EAEA,QAAI,CAAC,CAACT,mBAAmB,CAACC,WAAD,EAAcC,GAAd,CAAzB,EAA6C;EAC3C,UAAMgC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;EAC7B,YAAMC,QAAgB,GAAGL,YAAY,CAACC,KAAK,CAACtB,IAAP,EAAaP,GAAb,CAArC;EACA,YAAMkC,KAAU,GAAGL,KAAK,CAACM,MAAN,CAAaF,QAAb,CAAnB;;EAEA,YAAI,CAACA,QAAL,EAAe;EACbJ,UAAAA,KAAK,CAACtB,IAAN,CAAWkB,MAAX,CAAkBQ,QAAlB,EAA4B,CAA5B;EACAJ,UAAAA,KAAK,CAACM,MAAN,CAAaV,MAAb,CAAoBQ,QAApB,EAA8B,CAA9B;;EAEA,cAAI,OAAOf,aAAP,KAAyB,UAA7B,EAAyC;EACvCA,YAAAA,aAAa,CAACW,KAAD,EAAQC,aAAR,EAAuBC,MAAvB,CAAb;EACD;EACF;;EAEDX,QAAAA,eAAe,CAACrB,WAAD,EAAcC,GAAd,EAAmB,IAAnB,CAAf;;EAEA,YAAI,OAAOjB,QAAP,KAAoB,UAApB,IAAkCA,QAAQ,CAACiB,GAAD,CAAR,KAAkB,KAAxD,EAA+D;EAC7D6B,UAAAA,KAAK,CAACtB,IAAN,CAAW6B,OAAX,CAAmBpC,GAAnB;EACA6B,UAAAA,KAAK,CAACM,MAAN,CAAaC,OAAb,CAAqBF,KAArB;EAEAR,UAAAA,6BAA6B,CAAC3B,WAAD,EAAc4B,OAAd,EAAuBxB,OAAvB,CAA7B,CAA6D0B,KAA7D,EAAoEC,aAApE,EAAmFC,MAAnF;;EAEA,cAAI,OAAOb,aAAP,KAAyB,UAA7B,EAAyC;EACvCA,YAAAA,aAAa,CAACW,KAAD,EAAQC,aAAR,EAAuBC,MAAvB,CAAb;EACD;EACF;EACF,OAzBD;;EA2BAhC,MAAAA,WAAW,CAACsC,IAAZ,CAAiB;EACfL,QAAAA,gBAAgB,EAAhBA,gBADe;EAEfhC,QAAAA,GAAG,EAAHA,GAFe;EAGf;EACAwB,QAAAA,SAAS,EAAEc,UAAU,CAACN,gBAAD,EAAmBrD,MAAnB;EAJN,OAAjB;EAMD;EACF,GAtCD;EAuCD,CAhEM;AAkEP,EAAO,IAAM4D,+BAAyC,GAAG,SAA5CA,+BAA4C,CACvDxC,WADuD,EAEvD4B,OAFuD,EAGzC;EAAA,MACPhD,MADO,GACGgD,OADH,CACPhD,MADO;EAGd;;;;;;;;;;;;;;EAaA,SAAO,SAASwC,UAAT,CAAoBU,KAApB,EAAkC;EACvC,QAAM7B,GAAQ,GAAG6B,KAAK,CAACtB,IAAN,CAAW,CAAX,CAAjB;EACA,QAAMe,eAAuB,GAAGxB,mBAAmB,CAACC,WAAD,EAAcC,GAAd,CAAnD;;EAEA,QAAI,CAACsB,eAAL,EAAsB;EACpBF,MAAAA,eAAe,CAACrB,WAAD,EAAcC,GAAd,EAAmB,KAAnB,CAAf;EAEAD,MAAAA,WAAW,CAACuB,eAAD,CAAX,CAA6BE,SAA7B,GAAyCc,UAAU,CAACvC,WAAW,CAACuB,eAAD,CAAX,CAA6BU,gBAA9B,EAAgDrD,MAAhD,CAAnD;EACD;EACF,GATD;EAUD,CA7BM;EA+BP;;;;;;;;;;;;;;;AAcA,EAAO,IAAM6D,gBAAgB,GAAG,SAAnBA,gBAAmB,CAC9BzC,WAD8B,EAE9B4B,OAF8B,EAG9BxB,OAH8B,EAI9BC,aAJ8B,EAKnB;EAAA,MACJzB,MADI,GACoBgD,OADpB,CACJhD,MADI;EAAA,MACIS,YADJ,GACoBuC,OADpB,CACIvC,YADJ;EAGX,MAAM6B,UAAU,GACd,OAAOtC,MAAP,KAAkB,QAAlB,IAA8B8D,QAAQ,CAAC9D,MAAD,CAAtC,GACI+C,6BAA6B,CAAC3B,WAAD,EAAc4B,OAAd,EAAuBxB,OAAvB,EAAgCC,aAAhC,CADjC,GAEI/B,SAHN;EAKA,SAAO;EACL4C,IAAAA,UAAU,EAAVA,UADK;EAELE,IAAAA,UAAU,EAAEF,UAAU,IAAI7B,YAAd,GAA6BmD,+BAA+B,CAACxC,WAAD,EAAc4B,OAAd,CAA5D,GAAqFtD;EAF5F,GAAP;EAID,CAjBM;;ECpJP;;EAQA;;;;;AAKA,EAAO,IAAMqE,UAAsB,GAAG;EACpCC,EAAAA,2BAA2B,EAAE,CADO;EAEpCC,EAAAA,iBAAiB,EAAE,KAFiB;EAGpCC,EAAAA,QAAQ,EAAE;EAH0B,CAA/B;EAMP;;;;;;EAKA,IAAIC,mBAA4B,GAAG,KAAnC;EAEA;;;;;;;;;AAQA,MAAaC,YAAY,GAAG,SAAfA,YAAe,GAAY;EACtCL,EAAAA,UAAU,CAACE,iBAAX,GAA+B,IAA/B;EACD,CAFM;AAIP,EAAO,IAAMI,8BAA8B,GAAG,SAAjCA,8BAAiC,CAACrB,OAAD,EAAsB;EAAA,MAC3D3C,WAD2D,GAC5C2C,OAD4C,CAC3D3C,WAD2D;;EAIlE,MAAI,CAAC0D,UAAU,CAACG,QAAX,CAAoB7D,WAApB,CAAL,EAAuC;EACrC;EACA0D,IAAAA,UAAU,CAACG,QAAX,CAAoB7D,WAApB,IAAmC;EACjCiE,MAAAA,KAAK,EAAE,CAD0B;EAEjCC,MAAAA,IAAI,EAAE;EAF2B,KAAnC;EAID;EAED;;;;;;;;;;;;EAUA,SAAO,YAAM;EACX;EACAR,IAAAA,UAAU,CAACG,QAAX,CAAoB7D,WAApB,EAAiCiE,KAAjC;EACD,GAHD;EAID,CA1BM;AA4BP,EAAO,IAAME,qCAAqC,GAAG,SAAxCA,qCAAwC,CAACxB,OAAD,EAAsB;EAAA,MAClE3C,WADkE,GACnD2C,OADmD,CAClE3C,WADkE;EAGzE;;;;;;;;;;;EAUA,SAAO,YAAM;EACX;EACA0D,IAAAA,UAAU,CAACG,QAAX,CAAoB7D,WAApB,EAAiCiE,KAAjC,GAFW;;EAIXP,IAAAA,UAAU,CAACG,QAAX,CAAoB7D,WAApB,EAAiCkE,IAAjC;EACD,GALD;EAMD,CAnBM;EAqBP;;;;;;;;;;;;AAWA,EAAO,IAAME,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,EAAD,EAA0B;EAC7D,MAAMC,KAAK,GAAG,IAAIC,KAAJ,GAAYD,KAA1B;EACA,MAAME,MAAM,GAAGH,EAAE,CAACI,WAAH,IAAkBJ,EAAE,CAACK,IAArB,mBAA0ChB,UAAU,CAACC,2BAAX,EAAzD;;EAEA,MAAI,CAACW,KAAL,EAAY;EACV,WAAOE,MAAP;EACD;;EAED,MAAMG,KAAK,GAAGL,KAAK,CAACM,KAAN,CAAY,IAAZ,EAAkBC,KAAlB,CAAwB,CAAxB,CAAd;EAEA,MAAIC,IAAJ,EAAUC,mBAAV;;EAEA,OAAK,IAAI9D,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG0D,KAAK,CAACpE,MAAlC,EAA0CU,KAAK,EAA/C,EAAmD;EACjD6D,IAAAA,IAAI,GAAGH,KAAK,CAAC1D,KAAD,CAAZ;;EAEA,QAAI,CAAC,CAAC6D,IAAI,CAACE,OAAL,CAAa,SAAb,CAAF,IAA6B,CAAC,CAACF,IAAI,CAACE,OAAL,CAAa,WAAb,CAA/B,IAA4D,CAAC,CAACF,IAAI,CAACE,OAAL,CAAa,YAAb,CAAlE,EAA8F;EAC5FD,MAAAA,mBAAmB,GAAGD,IAAI,CAACG,OAAL,CAAa,KAAb,EAAoB,KAApB,EAA2BC,IAA3B,EAAtB;EACA;EACD;EACF;;EAED,SAAOH,mBAAmB,GAAMP,MAAN,SAAgBO,mBAAhB,GAAwCP,MAAlE;EACD,CAtBM;EAwBP;;;;;;;;;;;;;AAYA,EAAO,IAAMW,kBAAkB,GAAG,SAArBA,kBAAqB,CAAClB,KAAD,EAAgBC,IAAhB;EAAA,SAChCD,KAAK,GAAM,CAAEC,IAAI,GAAGD,KAAR,GAAiB,GAAlB,EAAuBmB,OAAvB,CAA+B,CAA/B,CAAN,SAA6C,IADlB;EAAA,CAA3B;EAGP;;;;;;;;;;;;AAWA,EAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACrF,WAAD,EAAuC;EAC7D,MAAI,CAAC0D,UAAU,CAACE,iBAAZ,IAAiC,CAACE,mBAAtC,EAA2D;EACzDwB,IAAAA,OAAO,CAACC,IAAR,CAAa,oFAAb,EADyD;;EAGzDzB,IAAAA,mBAAmB,GAAG,IAAtB;EACD;;EAED,MAAI9D,WAAJ,EAAiB;EACf,QAAI,CAAC0D,UAAU,CAACG,QAAX,CAAoB7D,WAApB,CAAL,EAAuC;EACrC,aAAO;EACLiE,QAAAA,KAAK,EAAE,CADF;EAELC,QAAAA,IAAI,EAAE,CAFD;EAGLsB,QAAAA,KAAK,EAAE;EAHF,OAAP;EAKD;;EAED,QAAMC,OAAqB,GAAG/B,UAAU,CAACG,QAAX,CAAoB7D,WAApB,CAA9B;EAEA,WAAO+B,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkByD,OAAlB,EAA2B;EAChCD,MAAAA,KAAK,EAAEL,kBAAkB,CAACM,OAAO,CAACxB,KAAT,EAAgBwB,OAAO,CAACvB,IAAxB;EADO,KAA3B,CAAP;EAGD;;EAED,MAAMwB,aAA2B,GAAG3D,MAAM,CAACR,IAAP,CAAYmC,UAAU,CAACG,QAAvB,EAAiCrD,MAAjC,CAClC,UAACqD,QAAD,EAAW7D,WAAX,EAA2B;EACzB6D,IAAAA,QAAQ,CAACI,KAAT,IAAkBP,UAAU,CAACG,QAAX,CAAoB7D,WAApB,EAAiCiE,KAAnD;EACAJ,IAAAA,QAAQ,CAACK,IAAT,IAAiBR,UAAU,CAACG,QAAX,CAAoB7D,WAApB,EAAiCkE,IAAlD;EAEA,WAAOL,QAAP;EACD,GANiC,EAOlC;EACEI,IAAAA,KAAK,EAAE,CADT;EAEEC,IAAAA,IAAI,EAAE;EAFR,GAPkC,CAApC;EAaA,SAAOnC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB0D,aAAlB,EAAiC;EACtC7B,IAAAA,QAAQ,EAAE9B,MAAM,CAACR,IAAP,CAAYmC,UAAU,CAACG,QAAvB,EAAiCrD,MAAjC,CAAwC,UAACqD,QAAD,EAAW7D,WAAX,EAA2B;EAC3E6D,MAAAA,QAAQ,CAAC7D,WAAD,CAAR,GAAwBqF,QAAQ,CAACrF,WAAD,CAAhC;EAEA,aAAO6D,QAAP;EACD,KAJS,EAIP,EAJO,CAD4B;EAMtC2B,IAAAA,KAAK,EAAEL,kBAAkB,CAACO,aAAa,CAACzB,KAAf,EAAsByB,aAAa,CAACxB,IAApC;EANa,GAAjC,CAAP;EAQD,CA5CM;EA8CP;;;;;;;;;;;;AAWA,EAAO,IAAMyB,eAAe,GAAG,SAAlBA,eAAkB,CAAChD,OAAD;EAAA,SAC7Be,UAAU,CAACE,iBAAX,GACI;EACA3B,IAAAA,UAAU,EAAE+B,8BAA8B,CAACrB,OAAD,CAD1C;EAEAR,IAAAA,UAAU,EAAEgC,qCAAqC,CAACxB,OAAD;EAFjD,GADJ,GAKI,EANyB;EAAA,CAAxB;;EC7MP;AACA,EAoBA;;;;;;;;;;;;;;AAaA,EAAO,IAAMiD,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC7C,MAAD,QAAmD;EAAA,MAA/BhC,WAA+B,QAA/BA,WAA+B;EAAA,wBACTgC,MAAM,CAACJ,OADE;EAAA,MAC5ExB,OAD4E,mBAC5EA,OAD4E;EAAA,MACnEC,aADmE,mBACnEA,aADmE;EAAA,MACpDa,UADoD,mBACpDA,UADoD;EAAA,MACxCC,aADwC,mBACxCA,aADwC;EAAA,MACzB2D,YADyB,mBACzBA,YADyB;EAGnF,MAAMjD,YAAsB,GAAG1B,kBAAkB,CAACC,OAAD,EAAUC,aAAV,CAAjD;;EAEA2B,EAAAA,MAAM,CAAC+C,GAAP,GAAa,UAAC9E,GAAD,EAAkBkC,KAAlB,EAAuC;EAClD,QAAM6C,QAAoB,GAAGF,YAAY,GAAGA,YAAY,CAAC7E,GAAD,CAAf,GAAuBA,GAAhE;;EAEA,QAAI,CAAC,CAAC4B,YAAY,CAACG,MAAM,CAACF,KAAP,CAAatB,IAAd,EAAoBwE,QAApB,CAAlB,EAAiD;EAC/C,UAAIhD,MAAM,CAACF,KAAP,CAAamD,IAAb,IAAqBjD,MAAM,CAACJ,OAAP,CAAe9C,OAAxC,EAAiD;EAC/CkD,QAAAA,MAAM,CAACF,KAAP,CAAatB,IAAb,CAAkB0E,GAAlB;EACAlD,QAAAA,MAAM,CAACF,KAAP,CAAaM,MAAb,CAAoB8C,GAApB;EACD;;EAEDlD,MAAAA,MAAM,CAACF,KAAP,CAAatB,IAAb,CAAkB6B,OAAlB,CAA0B2C,QAA1B;EACAhD,MAAAA,MAAM,CAACF,KAAP,CAAaM,MAAb,CAAoBC,OAApB,CAA4BF,KAA5B;EAEAjB,MAAAA,UAAU,CAACc,MAAM,CAACF,KAAR,EAAeE,MAAM,CAACJ,OAAtB,EAA+BI,MAA/B,CAAV;EACAb,MAAAA,aAAa,CAACa,MAAM,CAACF,KAAR,EAAeE,MAAM,CAACJ,OAAtB,EAA+BI,MAA/B,CAAb;EACD;EACF,GAfD;;EAiBAA,EAAAA,MAAM,CAACmD,KAAP,GAAe,YAAY;EACzBnD,IAAAA,MAAM,CAACF,KAAP,CAAatB,IAAb,CAAkBhB,MAAlB,GAA2B,CAA3B;EACAwC,IAAAA,MAAM,CAACF,KAAP,CAAaM,MAAb,CAAoB5C,MAApB,GAA6B,CAA7B;EAEA2B,IAAAA,aAAa,CAACa,MAAM,CAACF,KAAR,EAAeE,MAAM,CAACJ,OAAtB,EAA+BI,MAA/B,CAAb;EACD,GALD;;EAOAA,EAAAA,MAAM,CAACoD,GAAP,GAAa,UAASnF,GAAT,EAA+B;EAC1C,QAAMiC,QAAgB,GAAGL,YAAY,CAACG,MAAM,CAACF,KAAP,CAAatB,IAAd,EAAoBsE,YAAY,GAAGA,YAAY,CAAC7E,GAAD,CAAf,GAAuBA,GAAvD,CAArC;EAEA,WAAO,CAACiC,QAAD,GAAYF,MAAM,CAACpC,KAAP,CAAa,IAAb,EAAmBoC,MAAM,CAACF,KAAP,CAAatB,IAAb,CAAkB0B,QAAlB,CAAnB,CAAZ,GAA8D5D,SAArE,CAH0C;EAI3C,GAJD;;EAMA0D,EAAAA,MAAM,CAACsC,QAAP,GAAkB,YAAoB;EAAA,QAC7BrF,WAD6B,GACd+C,MAAM,CAACJ,OADO,CAC7B3C,WAD6B;EAGpC,WAAOqF,QAAQ,CAACrF,WAAD,CAAf;EACD,GAJD;;EAMA+C,EAAAA,MAAM,CAACqD,GAAP,GAAa,UAACpF,GAAD;EAAA,WAA8B,CAAC,CAAC,CAAC4B,YAAY,CAACG,MAAM,CAACF,KAAP,CAAatB,IAAd,EAAoBsE,YAAY,GAAGA,YAAY,CAAC7E,GAAD,CAAf,GAAuBA,GAAvD,CAA7C;EAAA,GAAb;;EAEA+B,EAAAA,MAAM,CAACxB,IAAP,GAAc;EAAA,WAAyBwB,MAAM,CAACsD,aAAP,CAAqB9E,IAA9C;EAAA,GAAd;;EAEAwB,EAAAA,MAAM,CAACuD,MAAP,GAAgB,UAACtF,GAAD,EAA2B;EACzC,QAAMiC,QAAgB,GAAGL,YAAY,CAACG,MAAM,CAACF,KAAP,CAAatB,IAAd,EAAoBsE,YAAY,GAAGA,YAAY,CAAC7E,GAAD,CAAf,GAAuBA,GAAvD,CAArC;;EAEA,QAAI,CAACiC,QAAL,EAAe;EACb,UAAMsD,WAAuB,GAAGxD,MAAM,CAACF,KAAP,CAAatB,IAAb,CAAkB0B,QAAlB,CAAhC;EAEAF,MAAAA,MAAM,CAACF,KAAP,CAAatB,IAAb,CAAkBkB,MAAlB,CAAyBQ,QAAzB,EAAmC,CAAnC;EACAF,MAAAA,MAAM,CAACF,KAAP,CAAaM,MAAb,CAAoBV,MAApB,CAA2BQ,QAA3B,EAAqC,CAArC;EAEAf,MAAAA,aAAa,CAACa,MAAM,CAACF,KAAR,EAAeE,MAAM,CAACJ,OAAtB,EAA+BI,MAA/B,CAAb;EAEAX,MAAAA,eAAe,CAACrB,WAAD,EAAcwF,WAAd,EAA2B,IAA3B,CAAf;EACD;EACF,GAbD;;EAeAxD,EAAAA,MAAM,CAACyD,MAAP,GAAgB,UAASxF,GAAT,EAA0BkC,KAA1B,EAA4C;EAC1D,QAAMD,QAAQ,GAAGL,YAAY,CAACG,MAAM,CAACF,KAAP,CAAatB,IAAd,EAAoBsE,YAAY,GAAGA,YAAY,CAAC7E,GAAD,CAAf,GAAuBA,GAAvD,CAA7B;;EAEA,QAAI,CAACiC,QAAL,EAAe;EACb,UAAMsD,WAAuB,GAAGxD,MAAM,CAACF,KAAP,CAAatB,IAAb,CAAkB0B,QAAlB,CAAhC;EAEAwD,MAAAA,UAAU,CAAC1D,MAAM,CAACF,KAAP,CAAatB,IAAd,EAAoBgF,WAApB,EAAiCtD,QAAjC,CAAV;EACAwD,MAAAA,UAAU,CAAC1D,MAAM,CAACF,KAAP,CAAaM,MAAd,EAAsBD,KAAtB,EAA6BD,QAA7B,CAAV;EAEAf,MAAAA,aAAa,CAACa,MAAM,CAACF,KAAR,EAAeE,MAAM,CAACJ,OAAtB,EAA+BI,MAA/B,CAAb;EACD;EACF,GAXD;;EAaAA,EAAAA,MAAM,CAACI,MAAP,GAAgB;EAAA,WAAyBJ,MAAM,CAACsD,aAAP,CAAqBlD,MAA9C;EAAA,GAAhB;EACD,CA1EM;EA4EP;;;;;;;;;;;;;;;;;AAgBA,EAAO,IAAMuD,qBAAqB,GAAG,SAAxBA,qBAAwB,CACnC3D,MADmC,SAG1B;EAAA,MADRhC,WACQ,SADRA,WACQ;EAAA,MADc4F,YACd,SADKhE,OACL;EAAA,MAD4BiE,gBAC5B,SAD4BA,gBAC5B;EACT,MAAMC,mBAAwC,GAAG9D,MAAM,CAACJ,OAAxD;EAEAZ,EAAAA,MAAM,CAAC+E,gBAAP,CACE/D,MADF,EAEG;EACCgE,IAAAA,oBAAoB,EAAE;EACpBC,MAAAA,YAAY,EAAE,IADM;EAEpBb,MAAAA,GAFoB,iBAEd;EACJ,eAAOU,mBAAP;EACD;EAJmB,KADvB;EAOC9F,IAAAA,WAAW,EAAE;EACXiG,MAAAA,YAAY,EAAE,IADH;EAEXb,MAAAA,GAFW,iBAEL;EACJ,eAAOpF,WAAP;EACD;EAJU,KAPd;EAaCkG,IAAAA,mBAAmB,EAAE;EACnBD,MAAAA,YAAY,EAAE,IADK;EAEnBb,MAAAA,GAFmB,iBAEb;EACJ,eAAOpF,WAAW,CAAC8D,KAAZ,CAAkB,CAAlB,CAAP;EACD;EAJkB,KAbtB;EAmBCjB,IAAAA,iBAAiB,EAAE;EACjBoD,MAAAA,YAAY,EAAE,IADG;EAEjBb,MAAAA,GAFiB,iBAEX;EACJ,eAAOzC,UAAU,CAACE,iBAAlB;EACD;EAJgB,KAnBpB;EAyBCsD,IAAAA,QAAQ,EAAE;EACRF,MAAAA,YAAY,EAAE,IADN;EAERb,MAAAA,GAFQ,iBAEF;EACJ,eAAO,IAAP;EACD;EAJO,KAzBX;EA+BCxD,IAAAA,OAAO,EAAE;EACPqE,MAAAA,YAAY,EAAE,IADP;EAEPb,MAAAA,GAFO,iBAED;EACJ,eAAOQ,YAAP;EACD;EAJM,KA/BV;EAqCCC,IAAAA,gBAAgB,EAAE;EAChBI,MAAAA,YAAY,EAAE,IADE;EAEhBb,MAAAA,GAFgB,iBAEV;EACJ,eAAOS,gBAAP;EACD;EAJe;EArCnB,GAFH;;EAgDA,MAAID,YAAY,CAACnH,OAAjB,EAA0B;EACxBuD,IAAAA,MAAM,CAACoE,YAAP,GAAsBP,gBAAgB,CAACO,YAAvC;EACApE,IAAAA,MAAM,CAACqE,YAAP,GAAsBR,gBAAgB,CAACQ,YAAvC;EACArE,IAAAA,MAAM,CAAC0B,WAAP,gBAA+BmC,gBAAgB,CAACnC,WAAjB,IAAgCmC,gBAAgB,CAAClC,IAAjD,IAAyD,WAAxF;EACA3B,IAAAA,MAAM,CAACsE,SAAP,GAAmBT,gBAAgB,CAACS,SAApC;EACD;EACF,CA5DM;EA8DP;;;;;;;;;;;;;AAYA,EAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACvE,MAAD,EAAmBwE,aAAnB,EAAuD;EACzF3B,EAAAA,kBAAkB,CAAC7C,MAAD,EAASwE,aAAT,CAAlB;EACAb,EAAAA,qBAAqB,CAAC3D,MAAD,EAASwE,aAAT,CAArB;EAEA,SAAOxE,MAAP;EACD,CALM;;EC1MP;EACA;EACA;EACA,IAAI,eAAe,GAAG,OAAO,GAAG,KAAK,UAAU,CAAC;EAChD;EACA;EACA;;EAEA,IAAI,eAAe,GAAG,OAAO,GAAG,KAAK,UAAU,CAAC;EAChD;EACA;EACA;;EAEA,IAAI,mBAAmB,GAAG,OAAO,OAAO,KAAK,UAAU,CAAC;;EAExD;EACA,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;EACvB;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,gBAAgB,GAAG,SAAS,gBAAgB,CAAC,MAAM,EAAE,KAAK,EAAE;EAChE,EAAE,OAAO,MAAM,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;EACnE,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,OAAO,GAAG,SAAS,OAAO,CAAC,KAAK,EAAE,WAAW,EAAE,OAAO,EAAE,IAAI,EAAE;EAClE,EAAE,IAAI,IAAI,CAAC;;EAEX,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;EACrD,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;;EAExB,IAAI,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE;EAC1F,MAAM,OAAO,IAAI,CAAC;EAClB,KAAK;EACL,GAAG;;EAEH,EAAE,OAAO,KAAK,CAAC;EACf,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,QAAQ,GAAG,SAAS,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE;EAC9D,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;EACtD,IAAI,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE;EAC5C,MAAM,OAAO,IAAI,CAAC;EAClB,KAAK;EACL,GAAG;;EAEH,EAAE,OAAO,KAAK,CAAC;EACf,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,kBAAkB,GAAG,SAAS,kBAAkB,CAAC,OAAO,EAAE,OAAO,EAAE;EACvE,EAAE,OAAO,OAAO,KAAK,OAAO,IAAI,OAAO,KAAK,OAAO,IAAI,OAAO,KAAK,OAAO,CAAC;EAC3E,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,aAAa,GAAG,SAAS,aAAa,CAAC,MAAM,EAAE;EACnD,EAAE,OAAO,MAAM,CAAC,WAAW,KAAK,MAAM,CAAC;EACvC,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,aAAa,GAAG,SAAS,aAAa,CAAC,MAAM,EAAE;EACnD,EAAE,OAAO,OAAO,MAAM,CAAC,IAAI,KAAK,UAAU,CAAC;EAC3C,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,cAAc,GAAG,SAAS,cAAc,CAAC,MAAM,EAAE;EACrD,EAAE,OAAO,CAAC,EAAE,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC;EAC9C,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,WAAW,GAAG,SAAS,WAAW,GAAG;EACzC,EAAE,OAAO,mBAAmB,GAAG,IAAI,OAAO,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC;EAC7D,IAAI,OAAO,EAAE,EAAE;EACf,IAAI,GAAG,EAAE,SAAS,GAAG,CAAC,KAAK,EAAE;EAC7B,MAAM,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;EAC/B,KAAK;EACL,IAAI,GAAG,EAAE,SAAS,GAAG,CAAC,KAAK,EAAE;EAC7B,MAAM,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;EAC5C,KAAK;EACL,GAAG,CAAC,CAAC;EACL,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,mBAAmB,GAAG,SAAS,mBAAmB,CAAC,OAAO,EAAE;EAChE,EAAE,OAAO,UAAU,WAAW,EAAE;EAChC,IAAI,IAAI,UAAU,GAAG,OAAO,IAAI,WAAW,CAAC;EAC5C,IAAI,OAAO,UAAU,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE;EAC9C,MAAM,IAAI,KAAK,KAAK,KAAK,CAAC,EAAE;EAC5B,QAAQ,KAAK,GAAG,WAAW,EAAE,CAAC;EAC9B,OAAO;;EAEP,MAAM,IAAI,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;EACzC,MAAM,IAAI,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;;EAEzC,MAAM,IAAI,SAAS,IAAI,SAAS,EAAE;EAClC,QAAQ,OAAO,SAAS,IAAI,SAAS,CAAC;EACtC,OAAO;;EAEP,MAAM,gBAAgB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;EACvC,MAAM,gBAAgB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;EACvC,MAAM,OAAO,UAAU,CAAC,OAAO,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;EACjD,KAAK,CAAC;EACN,GAAG,CAAC;EACJ,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,OAAO,GAAG,SAAS,OAAO,CAAC,GAAG,EAAE;EACpC,EAAE,IAAI,KAAK,GAAG,EAAE,CAAC;EACjB,EAAE,GAAG,CAAC,OAAO,CAAC,UAAU,KAAK,EAAE,GAAG,EAAE;EACpC,IAAI,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,CAAC;EACpC,GAAG,CAAC,CAAC;EACL,EAAE,OAAO,KAAK,CAAC;EACf,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,QAAQ,GAAG,SAAS,QAAQ,CAAC,GAAG,EAAE;EACtC,EAAE,IAAI,MAAM,GAAG,EAAE,CAAC;EAClB,EAAE,GAAG,CAAC,OAAO,CAAC,UAAU,KAAK,EAAE;EAC/B,IAAI,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;EAC9B,GAAG,CAAC,CAAC;EACL,EAAE,OAAO,MAAM,CAAC;EAChB,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,cAAc,GAAG,SAAS,cAAc,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE;EAC5E,EAAE,IAAI,MAAM,CAAC,MAAM,KAAK,MAAM,CAAC,MAAM,EAAE;EACvC,IAAI,OAAO,KAAK,CAAC;EACjB,GAAG;;EAEH,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;EACtD,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,EAAE;EACtD,MAAM,OAAO,KAAK,CAAC;EACnB,KAAK;EACL,GAAG;;EAEH,EAAE,OAAO,IAAI,CAAC;EACd,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,YAAY,GAAG,SAAS,YAAY,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE;EACpE,EAAE,IAAI,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;EAC7B,EAAE,IAAI,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;;EAE7B,EAAE,IAAI,MAAM,CAAC,MAAM,KAAK,MAAM,CAAC,MAAM,EAAE;EACvC,IAAI,OAAO,KAAK,CAAC;EACjB,GAAG;;EAEH,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;EACtD,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,EAAE;EAC1G,MAAM,OAAO,KAAK,CAAC;EACnB,KAAK;EACL,GAAG;;EAEH,EAAE,OAAO,IAAI,CAAC;EACd,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,eAAe,GAAG,SAAS,eAAe,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;EAChF,EAAE,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;EAC5B,EAAE,IAAI,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;;EAE5B,EAAE,IAAI,KAAK,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE;EACrC,IAAI,OAAO,KAAK,CAAC;EACjB,GAAG;;EAEH,EAAE,IAAI,GAAG,CAAC;;EAEV,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;EACrD,IAAI,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;;EAEvB,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,GAAG,EAAE,kBAAkB,CAAC,EAAE;EACnD,MAAM,OAAO,KAAK,CAAC;EACnB,KAAK;;;EAGL,IAAI,IAAI,GAAG,KAAK,QAAQ,IAAI,cAAc,CAAC,OAAO,CAAC,IAAI,cAAc,CAAC,OAAO,CAAC,EAAE;EAChF,MAAM,SAAS;EACf,KAAK;;EAEL,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE;EACpD,MAAM,OAAO,KAAK,CAAC;EACnB,KAAK;EACL,GAAG;;EAEH,EAAE,OAAO,IAAI,CAAC;EACd,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,eAAe,GAAG,SAAS,eAAe,CAAC,OAAO,EAAE,OAAO,EAAE;EACjE,EAAE,OAAO,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,UAAU,KAAK,OAAO,CAAC,UAAU,IAAI,OAAO,CAAC,SAAS,KAAK,OAAO,CAAC,SAAS,IAAI,OAAO,CAAC,OAAO,KAAK,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,SAAS,KAAK,OAAO,CAAC,SAAS,CAAC;EAC/R,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAI,YAAY,GAAG,SAAS,YAAY,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE;EACpE,EAAE,IAAI,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;EAC/B,EAAE,IAAI,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;;EAE/B,EAAE,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM,EAAE;EACzC,IAAI,OAAO,KAAK,CAAC;EACjB,GAAG;;EAEH,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;EACvD,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,EAAE;EAChH,MAAM,OAAO,KAAK,CAAC;EACnB,KAAK;EACL,GAAG;;EAEH,EAAE,OAAO,IAAI,CAAC;EACd,CAAC,CAAC;;EAEF;EACA,IAAI,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;;EAE5B,IAAI,gBAAgB,GAAG,SAAS,gBAAgB,CAAC,aAAa,EAAE;EAChE;EACA,EAAE,IAAI,OAAO,GAAG,OAAO,aAAa,KAAK,UAAU,GAAG,aAAa,CAAC,UAAU,CAAC,GAAG,UAAU,CAAC;EAC7F;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA,EAAE,SAAS,UAAU,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;EAC9C,IAAI,IAAI,kBAAkB,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE;EAC9C,MAAM,OAAO,IAAI,CAAC;EAClB,KAAK;;EAEL,IAAI,IAAI,OAAO,GAAG,OAAO,OAAO,CAAC;;EAEjC,IAAI,IAAI,OAAO,KAAK,OAAO,OAAO,IAAI,OAAO,KAAK,QAAQ,IAAI,CAAC,OAAO,IAAI,CAAC,OAAO,EAAE;EACpF,MAAM,OAAO,KAAK,CAAC;EACnB,KAAK;;EAEL,IAAI,IAAI,aAAa,CAAC,OAAO,CAAC,IAAI,aAAa,CAAC,OAAO,CAAC,EAAE;EAC1D,MAAM,OAAO,eAAe,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;EAC9D,KAAK;;EAEL,IAAI,IAAI,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;EAClC,IAAI,IAAI,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;;EAElC,IAAI,IAAI,MAAM,IAAI,MAAM,EAAE;EAC1B,MAAM,OAAO,MAAM,KAAK,MAAM,IAAI,cAAc,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;EAClF,KAAK;;EAEL,IAAI,IAAI,KAAK,GAAG,OAAO,YAAY,IAAI,CAAC;EACxC,IAAI,IAAI,KAAK,GAAG,OAAO,YAAY,IAAI,CAAC;;EAExC,IAAI,IAAI,KAAK,IAAI,KAAK,EAAE;EACxB,MAAM,OAAO,KAAK,KAAK,KAAK,IAAI,kBAAkB,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,OAAO,CAAC,OAAO,EAAE,CAAC,CAAC;EACzF,KAAK;;EAEL,IAAI,IAAI,OAAO,GAAG,OAAO,YAAY,MAAM,CAAC;EAC5C,IAAI,IAAI,OAAO,GAAG,OAAO,YAAY,MAAM,CAAC;;EAE5C,IAAI,IAAI,OAAO,IAAI,OAAO,EAAE;EAC5B,MAAM,OAAO,OAAO,KAAK,OAAO,IAAI,eAAe,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;EACtE,KAAK;;EAEL,IAAI,IAAI,aAAa,CAAC,OAAO,CAAC,IAAI,aAAa,CAAC,OAAO,CAAC,EAAE;EAC1D,MAAM,OAAO,OAAO,KAAK,OAAO,CAAC;EACjC,KAAK;;EAEL,IAAI,IAAI,eAAe,EAAE;EACzB,MAAM,IAAI,IAAI,GAAG,OAAO,YAAY,GAAG,CAAC;EACxC,MAAM,IAAI,IAAI,GAAG,OAAO,YAAY,GAAG,CAAC;;EAExC,MAAM,IAAI,IAAI,IAAI,IAAI,EAAE;EACxB,QAAQ,OAAO,IAAI,KAAK,IAAI,IAAI,YAAY,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;EAC9E,OAAO;EACP,KAAK;;EAEL,IAAI,IAAI,eAAe,EAAE;EACzB,MAAM,IAAI,IAAI,GAAG,OAAO,YAAY,GAAG,CAAC;EACxC,MAAM,IAAI,IAAI,GAAG,OAAO,YAAY,GAAG,CAAC;;EAExC,MAAM,IAAI,IAAI,IAAI,IAAI,EAAE;EACxB,QAAQ,OAAO,IAAI,KAAK,IAAI,IAAI,YAAY,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;EAC9E,OAAO;EACP,KAAK;;EAEL,IAAI,OAAO,eAAe,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;EAC5D,GAAG;;EAEH,EAAE,OAAO,UAAU,CAAC;EACpB,CAAC,CAAC;;EAEF;EACA,IAAI,iBAAiB,GAAG,gBAAgB,CAAC,mBAAmB,EAAE,CAAC,CAAC;EAChE,IAAI,oBAAoB,GAAG,gBAAgB,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,CAAC,CAAC;EACrF,IAAI,SAAS,GAAG,gBAAgB,EAAE,CAAC;EACnC,IAAI,YAAY,GAAG,gBAAgB,CAAC,YAAY;EAChD,EAAE,OAAO,kBAAkB,CAAC;EAC5B,CAAC,CAAC,CAAC;;EClbI,IAAMyE,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACxB;EACnC;;;;;;;;;;;EADkC;EAAA,SAYlC,UAACyB,IAAD,EAAkC;EAChC,QAAIzB,IAAI,IAAIyB,IAAI,CAAClH,MAAjB,EAAyB;EACvB,aAAOkH,IAAP;EACD;;EAED,YAAQzB,IAAR;EACE,WAAK,CAAL;EACE,eAAO,EAAP;;EAEF,WAAK,CAAL;EACE,eAAO,CAACyB,IAAI,CAAC,CAAD,CAAL,CAAP;;EAEF,WAAK,CAAL;EACE,eAAO,CAACA,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,CAAP;;EAEF,WAAK,CAAL;EACE,eAAO,CAACA,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,CAAP;;EAEF,WAAK,CAAL;EACE,eAAO,CAACA,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,EAA4BA,IAAI,CAAC,CAAD,CAAhC,CAAP;;EAEF,WAAK,CAAL;EACE,eAAO,CAACA,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,EAA4BA,IAAI,CAAC,CAAD,CAAhC,EAAqCA,IAAI,CAAC,CAAD,CAAzC,CAAP;EAjBJ;;EAoBA,WAAO/F,KAAK,CAACgG,SAAN,CAAgB7C,KAAhB,CAAsB8C,IAAtB,CAA2BF,IAA3B,EAAiC,CAAjC,EAAoCzB,IAApC,CAAP;EACD,GAtCiC;EAAA,CAA7B;;ECFP;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACA,EAAO,IAAI,KAAK,GAAG,SAAS,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE;EACjD,EAAE,IAAI,QAAQ,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;;EAEnC,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,MAAM,EAAE,KAAK,EAAE,EAAE;EAC/C,IAAI,QAAQ,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;EACnC,GAAG;;EAEH,EAAE,OAAO,QAAQ,CAAC;EAClB,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAO,IAAI,gBAAgB,GAAG,SAAS,gBAAgB,CAAC,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAE;EAC9E,EAAE,OAAO,OAAO,GAAG,QAAQ,GAAG,GAAG,CAAC;EAClC,CAAC,CAAC;AACF,EAcA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAO,IAAI,OAAO,GAAG,SAAS,OAAO,CAAC,KAAK,EAAE,KAAK,EAAE;EACpD,EAAE,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;EACrD,IAAI,IAAI,KAAK,CAAC,KAAK,CAAC,KAAK,KAAK,EAAE;EAChC,MAAM,OAAO,KAAK,CAAC;EACnB,KAAK;EACL,GAAG;;EAEH,EAAE,OAAO,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC;EACF;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAO,IAAI,cAAc,GAAG,SAAS,cAAc,CAAC,QAAQ,EAAE,gBAAgB,EAAE;EAChF,EAAE,IAAI,mBAAmB,GAAG,gBAAgB,IAAI,gBAAgB,CAAC;EACjE,EAAE,IAAI,WAAW,GAAG,OAAO,QAAQ,KAAK,UAAU,CAAC;EACnD,EAAE,IAAI,KAAK,GAAG,EAAE;EAChB,MAAM,cAAc;EACpB,MAAM,eAAe,CAAC;EACtB,EAAE,OAAO,UAAU,GAAG,EAAE,KAAK,EAAE;EAC/B,IAAI,IAAI,KAAK,CAAC,MAAM,EAAE;EACtB,MAAM,cAAc,GAAG,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;;EAE5C,MAAM,IAAI,CAAC,cAAc,EAAE;EAC3B,QAAQ,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,cAAc,GAAG,CAAC,CAAC,CAAC;EACjD,OAAO,MAAM;EACb,QAAQ,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC;EACnC,OAAO;;EAEP,MAAM,eAAe,GAAG,OAAO,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;;EAE9C,MAAM,IAAI,CAAC,eAAe,EAAE;EAC5B,QAAQ,OAAO,mBAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,EAAE,eAAe,CAAC,CAAC;EAC3E,OAAO;EACP,KAAK,MAAM;EACX,MAAM,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;EACvB,KAAK;;EAEL,IAAI,OAAO,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC;EACjE,GAAG,CAAC;EACJ,CAAC;;EC3GD;AACA,EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;AAEA,EAAe,SAAS,SAAS,CAAC,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE,gBAAgB,EAAE;EAC7E,EAAE,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,cAAc,CAAC,QAAQ,EAAE,gBAAgB,CAAC,EAAE,MAAM,CAAC,CAAC;EACnF;;ECfA;AACA,EAWA;;;;;;;;;;;;;AAYA,EAAO,IAAM4B,cAAc,GAAG,SAAjBA,cAAiB,CAAC5G,GAAD,EAAckC,KAAd;EAAA,SAAmC,OAAOA,KAAP,KAAiB,UAAjB,QAAiCA,KAAjC,GAA2CA,KAA9E;EAAA,CAAvB;EAEP;;;;;;;;;;;;;AAYA,EAAO,IAAM2E,WAAS,GAAG,SAAZA,WAAY,CAAC3E,KAAD,EAAa4E,QAAb,EAA6C;EACpE,MAAI;EACF,WAAOC,IAAI,CAACF,SAAL,CAAe3E,KAAf,EAAsB4E,QAAtB,CAAP;EACD,GAFD,CAEE,OAAOE,SAAP,EAAkB;EAClB,WAAOC,SAAa,CAAC/E,KAAD,EAAQ4E,QAAR,CAApB;EACD;EACF,CANM;EAQP;;;;;;;;;;;;;AAYA,EAAO,IAAMI,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,GAAD,EAAWL,QAAX,EAA2C;EAC/E,MAAMM,SAAiB,GAAG,OAAOD,GAAjC;EAEA,SAAOA,GAAG,KAAKC,SAAS,KAAK,QAAd,IAA0BA,SAAS,KAAK,UAA7C,CAAH,GAA8DP,WAAS,CAACM,GAAD,EAAML,QAAN,CAAvE,GAAyFK,GAAhG;EACD,CAJM;EAMP;;;;;;;;;;;;;;AAaA,EAAO,IAAME,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAC1F,OAAD,EAAgC;EACtE,MAAMmF,QAAmB,GAAGnF,OAAO,CAACzC,wBAAR,GAAmC0H,cAAnC,GAAoD,IAAhF;EAEA,SAAO,UAACH,IAAD,EAAqC;EAC1C,QAAIzG,GAAW,GAAG,GAAlB;;EAEA,SAAK,IAAIC,KAAa,GAAG,CAAzB,EAA4BA,KAAK,GAAGwG,IAAI,CAAClH,MAAzC,EAAiDU,KAAK,EAAtD,EAA0D;EACxDD,MAAAA,GAAG,IAAOkH,sBAAsB,CAACT,IAAI,CAACxG,KAAD,CAAL,EAAc6G,QAAd,CAA7B,MAAH;EACD;;EAED,WAAO,CAAC9G,GAAD,CAAP;EACD,GARD;EASD,CAZM;EAcP;;;;;;;;;;;;AAWA,EAAO,IAAMsH,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC3F;EACpC;EADmC;EAAA,SAEnC,OAAOA,OAAO,CAAC1C,UAAf,KAA8B,UAA9B;EAEEY,EAAAA,OAAO,CACLY,WADK,EAELkB,OAAO,CAAC1C,UAFH,CAFT,GAMIoI,wBAAwB,CAAC1F,OAAD,CARO;EAAA,CAA9B;EASP;;EAEA;;;;;;;;;;;;;AAYA,EAAO,IAAM4F,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACjH,QAAD,EAA0BN,GAA1B;EAAA,SAA0DM,QAAQ,CAAC,CAAD,CAAR,KAAgBN,GAAG,CAAC,CAAD,CAA7E;EAAA,CAAhC;;EC7HP;AACA,EA4BO,IAAMwH,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACnE,EAAD,EAA8B;EAClE,MAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B;EAC5B,WAAO,UAACxB,KAAD,EAAekE,oBAAf,EAA0D0B,QAA1D;EAAA;EAAA,aAELpE,EAAE,CAACoE,QAAQ,CAAC5F,KAAV,EAAiB4F,QAAQ,CAAC9F,OAA1B,EAAmC8F,QAAnC,CAFG;EAAA,KAAP;EAGD;EACF,CANM;EAQP;;;;;;;;;;;;AAWA,EAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa;EAAA,MAAEtJ,MAAF,QAAEA,MAAF;EAAA,MAAUE,WAAV,QAAUA,WAAV;EAAA,MAAuBE,OAAvB,QAAuBA,OAAvB;EAAA,SACxBJ,MAAM,IAAKE,WAAW,IAAIqJ,SAA1B,IAAyCnJ,OAAO,IAAIoJ,YAApD,IAAqEC,kBAD7C;EAAA,CAAnB;EAGP;;;;;;;;;;;;AAWA,EAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB;EAAA,MAAErJ,YAAF,SAAEA,YAAF;EAAA,MAAgBC,UAAhB,SAAgBA,UAAhB;EAAA,SAC9BA,UAAU,IAAKD,YAAY,IAAI8I,uBAA/B,IAA2DlJ,SAD7B;EAAA,CAAzB;EAGP;;;;;;;;;;;;AAWA,EAAO,IAAM0J,eAAe,GAAG,SAAlBA,eAAkB,CAACpG,OAAD,EAAiC;EAAA,MACvD/C,OADuD,GACN+C,OADM,CACvD/C,OADuD;EAAA,MAC9CJ,OAD8C,GACNmD,OADM,CAC9CnD,OAD8C;EAAA,MACrCC,YADqC,GACNkD,OADM,CACrClD,YADqC;EAAA,MACvBU,aADuB,GACNwC,OADM,CACvBxC,aADuB;EAG9D,SAAOU,OAAO,CACZpB,YAAY,IAAI6I,qBAAqB,CAAC3F,OAAD,CADzB,EAEZ,OAAOxC,aAAP,KAAyB,UAAzB,IACKU,OAAO,CACRY,WADQ,EAERtB,aAFQ,CAHA,EAOZX,OAAO,IAAIgI,oBAAoB,CAAC,CAAD,CAPnB,EAQZ,OAAO5H,OAAP,KAAmB,QAAnB,IAA+B4H,oBAAoB,CAAC5H,OAAD,CARvC,CAAd;EAUD,CAbM;;EC3BP;;;;;;;;;;;;;;;;;;;;;;;;;;EAyBA,SAASoJ,KAAT,CAAe3E,EAAf,EAAuC1B,OAAvC,EAAqF;EAAA,MAA9CA,OAA8C;EAA9CA,IAAAA,OAA8C,GAA3BxD,eAA2B;EAAA;;EACnF,MAAIkF,EAAE,CAAC6C,QAAP,EAAiB;EACf;EACA,WAAO8B,KAAK,CAAC3E,EAAE,CAACuC,gBAAJ,EAAsBhF,YAAY,CAACyC,EAAE,CAAC1B,OAAJ,EAAaA,OAAb,CAAlC,CAAZ;EACD;;EAED,MAAI,OAAO0B,EAAP,KAAc,QAAlB,EAA4B;EAC1B,WAAO,UAAC4E;EACN;EADK,MAAgCC,cAAhC;EAAA,UAAgCA,cAAhC;EAAgCA,QAAAA,cAAhC,GAA0D,EAA1D;EAAA;;EAAA,aAEL,OAAOD,SAAP,KAAqB,UAArB;EAEED,MAAAA,KAAK,CAACC,SAAD,EAAYrH,YAAY,CAACyC,EAAD,EAAK6E,cAAL,CAAxB,CAFP;EAIEF,MAAAA,KAAK,CAACpH,YAAY,CAACyC,EAAD,EAAK4E,SAAL,CAAb,CANF;EAAA,KAAP;EAOA;EACD;;EAED,MAAME,gBAAyB,GAAGpH,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB7C,eAAlB,EAAmCwD,OAAnC,EAA4C;EAC5E/C,IAAAA,OAAO,EAAE,OAAO+C,OAAO,CAAC/C,OAAf,KAA2B,QAA3B,IAAuC+C,OAAO,CAAC/C,OAAR,IAAmB,CAA1D,GAA8D+C,OAAO,CAAC/C,OAAtE,GAAgFT,eAAe,CAACS,OAD7B;EAE5EC,IAAAA,OAAO,EAAE,OAAO8C,OAAO,CAAC9C,OAAf,KAA2B,QAA3B,IAAuC8C,OAAO,CAAC9C,OAAR,IAAmB,CAA1D,GAA8D8C,OAAO,CAAC9C,OAAtE,GAAgFV,eAAe,CAACU,OAF7B;EAG5EG,IAAAA,WAAW,EAAE2C,OAAO,CAAC3C,WAAR,IAAuBoE,qBAAqB,CAACC,EAAD;EAHmB,GAA5C,CAAlC;EAKA,MAAMtD,WAA8B,GAAG,EAAvC;;EAtBmF,MAyBzEqI,aAzByE,GA4C/ED,gBA5C+E,CAyBjF/J,MAzBiF;EAAA,MA0BpEiK,kBA1BoE,GA4C/EF,gBA5C+E,CA0BjF7J,WA1BiF;EAAA,MA2BjFC,SA3BiF,GA4C/E4J,gBA5C+E,CA2BjF5J,SA3BiF;EAAA,MA4BxE+J,cA5BwE,GA4C/EH,gBA5C+E,CA4BjF3J,OA5BiF;EAAA,MA6BnE+J,kBA7BmE,GA4C/EJ,gBA5C+E,CA6BjF1J,YA7BiF;EAAA,MA8BrE+J,iBA9BqE,GA4C/EL,gBA5C+E,CA8BjFzJ,UA9BiF;EAAA,MA+BzE+J,aA/ByE,GA4C/EN,gBA5C+E,CA+BjFxJ,MA/BiF;EAAA,MAgCxE+J,cAhCwE,GA4C/EP,gBA5C+E,CAgCjFvJ,OAhCiF;EAAA,MAiCjFC,OAjCiF,GA4C/EsJ,gBA5C+E,CAiCjFtJ,OAjCiF;EAAA,MAkCjFoC,UAlCiF,GA4C/EkH,gBA5C+E,CAkCjFlH,UAlCiF;EAAA,MAmCjFC,aAnCiF,GA4C/EiH,gBA5C+E,CAmCjFjH,aAnCiF;EAAA,MAoCjFC,UApCiF,GA4C/EgH,gBA5C+E,CAoCjFhH,UApCiF;EAAA,MAqCvEwH,eArCuE,GA4C/ER,gBA5C+E,CAqCjFpJ,QArCiF;EAAA,MAsCpE6J,kBAtCoE,GA4C/ET,gBA5C+E,CAsCjFnJ,WAtCiF;EAAA,MAuCvD6J,+BAvCuD,GA4C/EV,gBA5C+E,CAuCjFjJ,wBAvCiF;EAAA,MAwCrE4J,iBAxCqE,GA4C/EX,gBA5C+E,CAwCjFlJ,UAxCiF;EAAA,MAyClE8J,oBAzCkE,GA4C/EZ,gBA5C+E,CAyCjFhJ,aAzCiF;EAAA,MA0CnE6J,mBA1CmE,GA4C/Eb,gBA5C+E,CA0CjF/I,YA1CiF;EAAA,MA2C9E6J,aA3C8E,iCA4C/Ed,gBA5C+E;;EA8CnF,MAAMhI,OAAiB,GAAGuH,UAAU,CAACS,gBAAD,CAApC;EACA,MAAM/H,aAAwB,GAAG0H,gBAAgB,CAACK,gBAAD,CAAjD;EACA,MAAMe,aAAsB,GAAG1G,gBAAgB,CAACzC,WAAD,EAAcoI,gBAAd,EAAgChI,OAAhC,EAAyCC,aAAzC,CAA/C;EACA,MAAM+I,YAAqB,GAAGxE,eAAe,CAACwD,gBAAD,CAA7C;EACA,MAAMtD,YAAuB,GAAGkD,eAAe,CAACI,gBAAD,CAA/C;EAEA,MAAMtC,mBAAwC,GAAG9E,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBiI,aAAlB,EAAiC;EAChF9I,IAAAA,OAAO,EAAPA,OADgF;EAEhFC,IAAAA,aAAa,EAAbA,aAFgF;EAGhF7B,IAAAA,SAAS,EAATA,SAHgF;EAIhFM,IAAAA,OAAO,EAAPA,OAJgF;EAKhFoC,IAAAA,UAAU,EAAEuG,sBAAsB,CAACnI,OAAO,CAAC4B,UAAD,EAAaiI,aAAa,CAACjI,UAA3B,EAAuCkI,YAAY,CAAClI,UAApD,CAAR,CAL8C;EAMhFC,IAAAA,aAAa,EAAEsG,sBAAsB,CAACtG,aAAD,CAN2C;EAOhFC,IAAAA,UAAU,EAAEqG,sBAAsB,CAACnI,OAAO,CAAC8B,UAAD,EAAa+H,aAAa,CAAC/H,UAA3B,EAAuCgI,YAAY,CAAChI,UAApD,CAAR,CAP8C;EAQhF0D,IAAAA,YAAY,EAAZA;EARgF,GAAjC,CAAjD;EAWA,SAAOyB,oBAAoB,CAAC8C,OAAO,CAAC/F,EAAD,EAAKwC,mBAAL,CAAR,EAAmC;EAC5D9F,IAAAA,WAAW,EAAXA,WAD4D;EAE5D4B,IAAAA,OAAO,EAAEwG,gBAFmD;EAG5DvC,IAAAA,gBAAgB,EAAEvC;EAH0C,GAAnC,CAA3B;EAKD;EAED;;;;;;;;;;;EASA2E,KAAK,CAACjF,YAAN,GAAqBA,YAArB;EAEA;;;;;;;;;;;;;EAYAiF,KAAK,CAACnI,OAAN,GAAgB,YAAqB;EACnC;EACA,SAAOA,OAAO,CAACF,KAAR,CAAc,IAAd,EAAoBC,SAApB,KAAkCoI,KAAzC;EACD,CAHD;EAKA;;;;;;;;;;;;;EAWAA,KAAK,CAACqB,IAAN,GAAarB,KAAK,CAAC;EAAC1J,EAAAA,WAAW,EAAE;EAAd,CAAD,CAAlB;EAEA;;;;;;;;;;;;EAWA0J,KAAK,CAAC3D,QAAN,GAAiBA,QAAjB;EAEA;;;;;;;;;;;;EAWA2D,KAAK,CAACpF,iBAAN,GAA0B,SAASA,iBAAT,GAAsC;EAC9D,SAAOF,UAAU,CAACE,iBAAlB;EACD,CAFD;EAIA;;;;;;;;;;;;;;EAYAoF,KAAK,CAAC9B,QAAN,GAAiB,SAASA,QAAT,CAAkB7C,EAAlB,EAAoC;EACnD,SAAO,OAAOA,EAAP,KAAc,UAAd,IAA4B,CAAC,CAACA,EAAE,CAAC6C,QAAxC;EACD,CAFD;EAIA;;;;;;;;;;;;;;EAYA8B,KAAK,CAACrJ,MAAN,GAAe,SAASA,MAAT,CAAgBA,MAAhB,EAA0C;EACvD,SAAOqJ,KAAK,CAAC;EAACrJ,IAAAA,MAAM,EAANA;EAAD,GAAD,CAAZ;EACD,CAFD;EAIA;;;;;;;;;;;;;;EAYAqJ,KAAK,CAACpJ,OAAN,GAAgB,SAASA,OAAT,CAAiBA,OAAjB,EAA4C;EAC1D,SAAOoJ,KAAK,CAAC;EAACpJ,IAAAA,OAAO,EAAPA;EAAD,GAAD,CAAZ;EACD,CAFD;EAIA;;;;;;;;;;;;;;EAYAoJ,KAAK,CAACnJ,OAAN,GAAgB,SAASA,OAAT,CAAiBA,OAAjB,EAA4C;EAC1D,SAAOmJ,KAAK,CAAC;EAACnJ,IAAAA,OAAO,EAAPA;EAAD,GAAD,CAAZ;EACD,CAFD;EAIA;;;;;;;;;;;;;EAWAmJ,KAAK,CAACsB,OAAN,GAAgBtB,KAAK,CAAC;EACpBzJ,EAAAA,SAAS,EAAE,IADS;EAEpBa,EAAAA,YAAY,EAAE;EAFM,CAAD,CAArB;EAKA;;;;;;;;;;;;EAWA4I,KAAK,CAACuB,KAAN,GAAcvB,KAAK,CAAC;EAACxJ,EAAAA,OAAO,EAAE;EAAV,CAAD,CAAnB;EAEA;;;;;;;;;;;;EAWAwJ,KAAK,CAACwB,WAAN,GAAoBxB,KAAK,CAAC;EACxBxJ,EAAAA,OAAO,EAAE,IADe;EAExBK,EAAAA,OAAO,EAAE;EAFe,CAAD,CAAzB;EAKA;;;;;;;;;;;;EAWAmJ,KAAK,CAACyB,SAAN,GAAkBzB,KAAK,CAAC;EAACvJ,EAAAA,YAAY,EAAE;EAAf,CAAD,CAAvB;EAEA;;;;;;;;;;;;EAWAuJ,KAAK,CAAC0B,MAAN,GAAe1B,KAAK,CAAC;EAACnJ,EAAAA,OAAO,EAAE;EAAV,CAAD,CAApB;;;;;;;;;;;;;"}